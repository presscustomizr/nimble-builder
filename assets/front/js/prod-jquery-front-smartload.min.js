window,document,window.nb_.listenTo("nimble-app-ready",function(){!function(d,a){var i="nimbleLazyLoad",s={load_all_images_on_first_scroll:!1,excludeImg:[],threshold:200,fadeIn_options:{duration:400},delaySmartLoadEvent:0},n="smartload-skip";function e(t,e){this.element=t,this.options=d.extend({},s,e),nb_.isArray(this.options.excludeImg)?this.options.excludeImg.push("."+n):this.options.excludeImg=["."+n],this._defaults=s,this._name=i,this.init()}e.prototype.init=function(){var e=this,i=d("[data-sek-src]:not("+this.options.excludeImg.join()+"), [data-sek-iframe-src]",this.element);this.increment=1,this.timer=0,i.addClass(n).bind("sek_load_img",{},function(){e._load_img(this)}).bind("sek_load_iframe",{},function(){e._load_iframe(this)}),nb_.cachedElements.$window.scroll(function(t){e._better_scroll_event_handler(i,t)}),nb_.cachedElements.$window.resize(nb_.debounce(function(t){e._maybe_trigger_load(i,t)},100)),this._maybe_trigger_load(i)},e.prototype._better_scroll_event_handler=function(t,e){var i=this;this.doingAnimation||(this.doingAnimation=!0,a.requestAnimationFrame(function(){i._maybe_trigger_load(t,e),i.doingAnimation=!1}))},e.prototype._maybe_trigger_load=function(t,i){var a=this;t.filter(function(t,e){return a._is_visible(e,i)}).map(function(t,e){"IFRAME"===d(e).prop("tagName")?d(e).trigger("sek_load_iframe"):d(e).trigger("sek_load_img")})},e.prototype._is_visible=function(t,e){var a=function(t){if(0<t.length&&t.is(":visible"))return t;var e=t.prev();if(0<e.length&&e.is(":visible"))return e;if(0<e.length&&!e.is(":visible"))return a(e);var i=t.parent();return 0<i.length?a(i):null},i=a(d(t));if(!i||i.length<1)return!1;var s=nb_.cachedElements.$window.scrollTop(),n=s+nb_.cachedElements.$window.height(),o=i.offset().top,r=o+i.height(),l=e&&"scroll"===e.type?this.options.threshold:0;return!(!e||"scroll"!=e.type||!this.options.load_all_images_on_first_scroll)||s-l<=r&&o<=n+l},e.prototype._load_img=function(t){var e=d(t),i=e.attr("data-sek-src"),a=e.attr("data-sek-srcset"),s=e.attr("data-sek-sizes"),n=d("<img />",{src:i});e.addClass("lazy-loading"),e.unbind("sek_load_img"),n.on("load",function(){e.removeAttr(["data-sek-src","data-sek-srcset","data-sek-sizes"].join(" ")),e.data("sek-lazy-bg")?e.css("backgroundImage","url("+i+")"):(e.attr("src",i),a&&e.attr("srcset",a),s&&e.attr("sizes",s)),e.hasClass("sek-lazy-loaded")||e.addClass("sek-lazy-loaded"),e.trigger("smartload"),e.data("sek-lazy-loaded",!0)}),n[0].complete&&n.trigger("load"),e.removeClass("lazy-loading")},e.prototype._load_iframe=function(t){var e=d(t);e.unbind("sek_load_iframe"),e.attr("src",function(){var t=d(this).attr("data-sek-iframe-src");return d(this).removeAttr("data-sek-iframe-src"),e.data("sek-lazy-loaded",!0),e.trigger("smartload"),e.hasClass("sek-lazy-loaded")||e.addClass("sek-lazy-loaded"),t})},d.fn[i]=function(t){return this.each(function(){d.data(this,"plugin_"+i)||d.data(this,"plugin_"+i,new e(this,t))})}}(jQuery,window)});