var SekPreviewPrototype=SekPreviewPrototype||{};!function(t,s,n){s.extend(SekPreviewPrototype,{initialize:function(){var e=this;try{this.skope_id=n.findWhere(_wpCustomizeSettings.czr_new_skopes,{skope:"local"}).skope_id}catch(e){return void this.errare("Preview => error when storing the skope_id",e)}this.scheduleHighlightActiveLevel(),e.setupLoader(),s(function(){e.setupSortable(),e.setupResizable(),e.setupUiHoverVisibility(),e.scheduleUiClickReactions(),e.schedulePanelMsgReactions()}),s("body").on("sek-columns-refreshed sek-modules-refreshed",function(e,t){if(!n.isUndefined(t)&&!n.isUndefined(t.in_sektion)&&0<s('[data-sek-id="'+t.in_sektion+'"]').length){var a=s('[data-sek-id="'+t.in_sektion+'"]');a.toggleClass("sek-has-modules",0<a.find('[data-sek-level="module"]').length)}})},scheduleHighlightActiveLevel:function(){var i=this;this.activeLevelUI=new t.Value(""),this.activeUIChangedRecently=new t.Value(!1),this.activeLevelUI.bind(function(e,t){var a=s('[data-sek-id="'+e+'"]'),n=s('[data-sek-id="'+t+'"]');0<a.length&&a.addClass("sek-active-ui sek-highlight-active-ui"),0<n.length&&n.removeClass("sek-active-ui sek-highlight-active-ui"),i.activeUIChangedRecently(Date.now())}),n.each(["sek-refresh-stylesheet","sek-refresh-level"],function(e){t.preview.bind(e,function(e){i.activeUIChangedRecently(Date.now())})}),this.activeUIChangedRecently.bind(function(e){var t=s('[data-sek-id="'+i.activeLevelUI()+'"]');s(".sek-highlight-active-ui").length&&s(".sek-highlight-active-ui").removeClass("sek-highlight-active-ui"),0<t.length&&t.toggleClass("sek-highlight-active-ui",!1!==e),clearTimeout(s.data(this,"_ui_change_timer_")),s.data(this,"_ui_change_timer_",setTimeout(function(){i.activeUIChangedRecently(!1)},3e3))})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupSortable:function(){var a=this;return this.sortableDefaultParams={placeholder:"sortable-placeholder",over:function(e,t){},cursorAt:{top:0,left:0},tolerance:"pointer"},c('[data-sek-level="location"]').each(function(){a.makeSektionsSortableInLocation(c(this).data("sek-id"))}),c("body").on("sek-section-added sek-level-refreshed",'[data-sek-level="location"]',function(e,t){a.makeSektionsSortableInLocation(c(this).data("sek-id"))}),c('[data-sek-level="location"]').each(function(){c(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(c(this).data("sek-id"))})}),c("body").on("sek-columns-refreshed sek-section-added",'[data-sek-level="section"]',function(e){a.makeColumnsSortableInSektion(c(this).data("sek-id"))}),c("body").on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){c(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(c(this).data("sek-id"))})}),c('[data-sek-level="location"]').each(function(){c(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))})}),c("body").on("sek-modules-refreshed",'[data-sek-level="column"]',function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))}),c("body").on("sek-columns-refreshed",'[data-sek-level="section"]',function(){c(this).find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))})}),c("body").on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){c(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))})}),this},makeSektionsSortableInLocation:function(e){var a,n,t,i=this,s=[],o=[];c('[data-sek-id="'+e+'"]').each(function(){t=c.extend(!0,{},i.sortableDefaultParams),c(this).sortable(k.extend(t,{handle:".sek-move-section",connectWith:'[data-sek-level="location"]',placeholder:{element:function(e){return c('<div class="sortable-placeholder"><div class="sek-module-placeholder-content"><p>'+sekPreviewLocalized.i18n["Insert here"]+"</p></div></div>")[0]},update:function(e,t){}},start:function(e,t){c("body").addClass("sek-moving-section"),$sourceLocation=t.item.closest('[data-sek-level="location"]'),a=$sourceLocation.data("sek-id"),$sourceLocation.children('[data-sek-level="section"]').each(function(){s.push(c(this).data("sek-id"))})},stop:function(e,t){c("body").removeClass("sek-moving-section"),o=[],$targetLocation=t.item.closest('[data-sek-level="location"]'),n=$targetLocation.data("sek-id"),$targetLocation.children('[data-sek-level="section"]').each(function(){o.push(c(this).data("sek-id"))}),l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"section",newOrder:o,from_location:a,to_location:n})},over:function(e,t){t.placeholder.addClass("sek-sortable-section-over")},out:function(e,t){t.placeholder.removeClass("sek-sortable-section-over")}}))})},makeColumnsSortableInSektion:function(e){var i=this,t=c.extend(!0,{},i.sortableDefaultParams),a=c('[data-sek-id="'+e+'"]').find(".sek-sektion-inner").first(),s=function(e){if(e=c.extend({forTarget:!0},e||{}),!k.isEmpty(c(this).data("_sortable_columns_css_classes_")))return c(this).data("_sortable_columns_css_classes_");var t,a=c(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length,n=Math.floor(100/a);t=!0===e.forTarget?12<a+1?12:a+1:a-1<1?1:a-1;var i={current:"sek-col-"+n,next:"sek-col-"+Math.floor(100/t)};return c(this).data("_sortable_columns_css_classes_",i),i};a.sortable(k.extend(t,{handle:".sek-move-column",connectWith:".sek-sektion-inner",over:function(e,t){var a,n=c(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==c(this).data("sek-is-sender")?(a=s.call(c(this)),k.isEmpty(a)||n.each(function(){c(this).removeClass(a.current).addClass(a.next)})):(a=s.call(c(this),{forTarget:!1}),k.isEmpty(a)||n.each(function(){c(this).addClass(a.current).removeClass(a.next)}))},out:function(e,t){var a,n=c(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==c(this).data("sek-is-sender")?(a=s.call(c(this)),k.isEmpty(a)||n.each(function(){c(this).addClass(a.current).removeClass(a.next)})):(a=s.call(c(this),{forTarget:!1}),k.isEmpty(a)||n.each(function(){c(this).removeClass(a.current).addClass(a.next)}))},remove:function(e,t){return $targetSektionCandidate=t.item.closest('[data-sek-level="section"]'),!(0<$targetSektionCandidate.length&&12<$targetSektionCandidate.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length)||(l.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["You've reached the maximum number of columns allowed in this section."]}),!1)},start:function(e,t){startOrder=[],newOrder=[],from_sektion=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){startOrder.push(c(this).data("sek-id"))}),c(this).data("sek-is-sender",!0),k.isEmpty(startOrder)&&i.errare("column sortable => startOrder should not be empty")},stop:function(e,t){$targetSektion=t.item.closest('[data-sek-level="section"]'),to_sektion=$targetSektion.data("sek-id"),$targetSektion.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){newOrder.push(c(this).data("sek-id"))});var a,n=c(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==c(this).data("sek-is-sender")?(a=s.call(c(this)),k.isEmpty(a)||n.each(function(){c(this).removeClass(a.current).addClass(a.next)})):(a=s.call(c(this),{forTarget:!1}),k.isEmpty(a)||n.each(function(){c(this).addClass(a.current).removeClass(a.next)})),c('[data-sek-level="section"]').find(".sek-sektion-inner").each(function(){c(this).data("sek-is-sender",null).data("_sortable_columns_css_classes_",null)}),k.isEmpty(newOrder)?i.errare("column sortable =>  newOrder should not be empty"):k.isEqual(newOrder,startOrder)&&to_sektion===from_sektion?sekPreviewLocalized.isDevMode&&i.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"column",newOrder:newOrder,from_sektion:from_sektion,to_sektion:to_sektion})}}))},makeModulesSortableInColumn:function(e){var a,n,i,s,t,o=[],r=[],d=this;t=c.extend(!0,{},d.sortableDefaultParams),c('[data-sek-id="'+e+'"]').find(".sek-column-inner").first().sortable(k.extend(t,{handle:".sek-move-module",connectWith:".sek-column-inner",over:function(e,t){c('[data-sek-level="location"]').find(".sek-sortable-overing").each(function(){c(this).removeClass("sek-sortable-overing")}),c(e.target).addClass("sek-sortable-overing")},start:function(e,t){o=[],r=[],c("body").addClass("sek-dragging-element"),n=t.item.closest('[data-sek-level="column"]').data("sek-id"),a=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="column"]').find(".sek-column-inner").first().children('[data-sek-level="module"]').each(function(){o.push(c(this).data("sek-id"))}),k.isEmpty(o)&&d.errare("makeModulesSortableInColumn => startOrder should not be empty")},stop:function(e,t){s=t.item.closest('[data-sek-level="column"]'),i=s.data("sek-id"),s.find(".sek-column-inner").first().children("[data-sek-id]").each(function(){r.push(c(this).data("sek-id"))}),k.isEmpty(r)?d.errare("makeModulesSortableInColumn => newOrder should not be empty"):k.isEqual(r,o)&&i===n?d.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"module",newOrder:r,from_column:n,to_column:i,from_sektion:a,to_sektion:t.item.closest('[data-sek-level="section"]').data("sek-id")}),c("body").removeClass("sek-dragging-element"))}}))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupResizable:function(){var e=this;return c(".sektion-wrapper").find('div[data-sek-level="section"]').each(function(){e.maybeMakeColumnResizableInSektion.call(this)}),c("body").on("sek-level-refreshed sek-modules-refreshed sek-columns-refreshed",'[data-sek-level="location"]',function(){c(this).find('[data-sek-level="section"]').each(function(){e.maybeMakeColumnResizableInSektion.call(this)})}),this},maybeMakeColumnResizableInSektion:function(){var a,n,i,s,o,r,d,e=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]');e.length<2||e.each(function(){c(this).resizable({resize:function(e,t){c(".sektion-wrapper").data("sek-resizing-columns",!0)},start:function(e,t){if(a=t.element.closest('div[data-sek-level="section"]'),a.data("sek-id"),n=a.find(".sek-sektion-inner")[0].getBoundingClientRect().width,!((o=a.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length)<2)){if((i=t.element.closest('div[data-sek-level="column"]')).length<1)throw new Error("ERROR => resizable => No valid level dom element found");d=i.index()+1==o,r=d?i.prev():i.next(),c(".sektion-wrapper").data("sek-resizing-columns",!0),k.delay(function(){c(".sektion-wrapper").data("sek-resizing-columns",!1)},3e3)}},stop:function(e,t){if(!(o<2)){if(i.length<1)throw new Error("ERROR => resizable => No valid level dom element found");i.css({width:"",height:""}),s=(parseFloat(t.size.width)/parseFloat(n)*100).toFixed(3),l.preview.send("sek-resize-columns",{action:"sek-resize-columns",level:i.data("sek-level"),in_sektion:a.data("sek-id"),id:i.data("sek-id"),resized_column:i.data("sek-id"),sister_column:r.data("sek-id"),resizedColumnWidthInPercent:s,col_number:o}),c(".sektion-wrapper").data("sek-resizing-columns",!1)}},helper:"ui-resizable-helper",handles:"e"});var e=c(this);k.delay(function(){e.find(".ui-resizable-handle").find(".fa-arrows-alt-h").length<1&&e.find(".ui-resizable-handle").append('<i class="fas fa-arrows-alt-h"></i>')},500)})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,u,p){u.extend(SekPreviewPrototype,{setupUiHoverVisibility:function(){var i,s,o,r,t,d=this,l=function(){(r=u(this)).children(".sek-dyn-ui-wrapper").length<1||(r.data("UIisFadingOut",!0),r.children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){u(this).remove(),r.data("UIisFadingOut",!1)}}))},a=function(){var e=u(this);clearTimeout(e.data("_toggle_ui_menu_")),e.data("_toggle_ui_menu_",setTimeout(function(){n.call(e)},1e4))},n=function(e){var t=u(this),a=u(this).closest(".sek-dyn-ui-location-type"),n=t.closest(".sek-dyn-ui-wrapper").find(".sek-dyn-ui-inner");!0===e?(t.removeClass("sek-collapsed"),n.addClass("sek-is-expanded"),a.hide()):(t.addClass("sek-collapsed"),n.removeClass("sek-is-expanded"),a.show())};u("body").on("click",".sek-dyn-ui-location-inner",function(e){var t=u(this).find(".sek-dyn-ui-hamb-menu-wrapper");u(this).closest('[data-sek-level="section"]').find(".sek-dyn-ui-hamb-menu-wrapper").each(function(){n.call(u(this))}),n.call(t,!0),a.call(t)}),u("body").on("mouseenter mouseover mouseleave",".sek-dyn-ui-wrapper",p.throttle(function(e){var t=u(this).find(".sek-dyn-ui-hamb-menu-wrapper");p.isUndefined(t.data("_toggle_ui_menu_"))||t.hasClass("sek-collapsed")||0<t.length&&a.call(t)},50)),u("body").on("click",".sek-minimize-ui",function(e){u(this).closest(".sek-dyn-ui-location-type").slideToggle("fast")}),u("body").on("mouseenter",".sek-wp-content-wrapper",function(e){0<(t=u(this)).children(".sek-dyn-ui-wrapper").length&&!0!==t.data("UIisFadingOut")||(i=d.parseTemplate("#sek-dyn-ui-tmpl-wp-content"),u.when(t.prepend(i({}))).done(function(){t.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}).on("mouseleave",".sek-wp-content-wrapper",function(e){u(this).data("UIisFadingOut",!0),t=u(this),u(this).children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){u(this).remove(),t.data("UIisFadingOut",!1)}})});var c=function(n){u("body").find("[data-sek-level]").each(function(){var e=u(this)[0].getBoundingClientRect(),t=n.x<=e.right&&e.left<=n.x,a=n.y>=e.top&&e.bottom>=n.y;t&&a?function(){if("location"!=(s=u(this).data("sek-level"))&&!(0<(r=u(this)).children(".sek-dyn-ui-wrapper").length)){switch(o={id:r.data("sek-id"),level:r.data("sek-level")},s){case"section":o=p.extend(o,{is_nested:!0===u(this).data("sek-is-nested"),can_have_more_columns:u(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12});break;case"column":var e=u(this).closest('div[data-sek-level="section"]');o=p.extend(o,{parent_can_have_more_columns:e.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,parent_is_single_column:e.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<2,parent_is_last_allowed_nested:!0===e.data("sek-is-nested")});break;case"module":var t=d.getRegisteredModuleProperty(r.data("sek-module-type"),"name");o=p.extend(o,{module_name:"not_set"!=t?t:""})}!0===u(".sektion-wrapper").data("sek-resizing-columns")&&p.contains(["column","module"],s)||(i=d.parseTemplate("#sek-dyn-ui-tmpl-"+s),u.when(u(this).prepend(i(o))).done(function(){r.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}}.call(u(this)):l.call(u(this))})};d.mouseMovedRecently=new e.Value({}),d.mouseMovedRecently.bind(function(e){var k;p.isEmpty(e)?(u("body").stop(!0,!0).find(".sek-add-content-button").each(function(){u(this).fadeOut({duration:200,complete:function(){u(this).remove()}})}),u("body").stop(!0,!0).find("[data-sek-level]").each(function(){u(this).children(".sek-dyn-ui-wrapper").find(".sek-is-expanded").length<1&&l.call(u(this))})):(u("body").find('div[data-sek-level="location"]').each(function(){$sectionCollection=u(this).children('div[data-sek-level="section"]'),i=d.parseTemplate("#sek-tmpl-add-content-button");var e,t=u(this).data("sek-id");$sectionCollection.each(function(){0<u(this).find(".sek-add-content-button").length||(u.when(u(this).prepend(i({location:t}))).done(function(){e=u(this).find(".sek-add-content-button"),u(this).data("sek-id")&&e.attr("data-sek-before-section",u(this).data("sek-id")),e.fadeIn(300)}),$sectionCollection.length==u(this).index()+1&&u.when(u(this).append(i({is_last:!0,location:t}))).done(function(){e=u(this).find(".sek-add-content-button").last(),u(this).data("sek-id")&&e.attr("data-sek-after-section",u(this).data("sek-id")),e.fadeIn(300)}))})}),u(".sek-empty-location-placeholder").each(function(){0<u(this).find(".sek-add-content-button").length||u.when(u(this).append(i({location:u(this).closest('div[data-sek-level="location"]').data("sek-id")}))).done(function(){$btn_el=u(this).find(".sek-add-content-button"),$btn_el.attr("data-sek-is-first-section",!0),$btn_el.fadeIn(300)})}),k=e,u("body").find(".sek-add-content-button").each(function(){var e=u(this)[0].getBoundingClientRect(),t=k.y,a=k.x,n=Math.abs(t-e.bottom),i=Math.abs(e.top-t),s=a-e.right,o=e.left-a,r=n<40||i<40,d=0<s&&s<40||0<o&&o<40,l=a<=e.right&&e.left<=a,c=t>=e.top&&e.bottom>=t;u(this).toggleClass("sek-mouse-is-close",(r||c)&&(d||l))}),c(e))});var k=function(){clearTimeout(u(window).data("_scroll_move_timer_")),d.mouseMovedRecently.set({})};return u(window).on("mousemove scroll",p.throttle(function(e){d.mouseMovedRecently({x:e.clientX,y:e.clientY}),clearTimeout(u(window).data("_scroll_move_timer_")),u(window).data("_scroll_move_timer_",setTimeout(function(){d.mouseMovedRecently.set({})},4e3))},50)),e.preview.bind("sek-drag-start",function(){k()}),u("body").on("sek-section-added",'[data-sek-level="location"]',function(e,t){k()}),this}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(u,p,m){p.extend(SekPreviewPrototype,{scheduleUiClickReactions:function(){var k=this;p("body").on("click",function(e){var t,a=p(e.target),n=a.closest('[data-sek-level="location"]'),i=a.closest("[data-sek-level]"),s=a.closest("[data-sek-click-on]"),o=n.data("sek-id"),r=i.data("sek-level"),d=i.data("sek-id");switch("add-content"==a.data("sek-click-on")||0<a.closest("[data-sek-click-on]").length&&"add-content"==a.closest("[data-sek-click-on]").data("sek-click-on")?"addContentButton":!m.isEmpty(a.data("sek-click-on"))||0<s.length?"UIIcon":"module"==i.data("sek-level")?"moduleWrapper":"column"==i.data("sek-level")&&!0===i.data("sek-no-modules")?"noModulesColumn":a.hasClass("sek-to-json")?"sekToJson":"column"==i.data("sek-level")?"columnOutsideModules":"section"==i.data("sek-level")?"sectionOutsideColumns":m.isEmpty(a.data("sek-add"))?a.hasClass("sek-wp-content-wrapper")||a.hasClass("sek-wp-content-dyn-ui")?"wpContent":a.hasClass("sek-edit-wp-content")?"editWpContent":"inactiveZone":"addSektion"){case"addContentButton":var l=!0===a.closest("[data-sek-is-first-section]").data("sek-is-first-section");u.preview.send("sek-add-section",{location:o,level:"section",before_section:a.closest("[data-sek-before-section]").data("sek-before-section"),after_section:a.closest("[data-sek-after-section]").data("sek-after-section"),is_first_section:l,send_to_preview:!l});break;case"UIIcon":if(i.length<1)throw new Error("ERROR => sek-front-preview => No valid level dom element found");if(t=a.closest("[data-sek-click-on]").data("sek-click-on"),m.isEmpty(t))throw new Error("Invalid action");if(m.isEmpty(r)||m.isEmpty(d))throw new Error("ERROR => sek-front-preview => No valid level id found");k._send_(a,{action:t,location:o,level:r,id:d,was_triggered:!1});break;case"moduleWrapper":if(0<a.parent(".sek-dyn-ui-icons").length)return;k._send_(a,{action:"edit-module",level:r,id:d});break;case"noModulesColumn":if(0<a.parent(".sek-dyn-ui-icons").length)return;k._send_(a,{action:"pick-module",level:r,id:d});break;case"columnOutsideModules":case"sectionOutsideColumns":k._send_(a,{action:"edit-options",location:o,level:r,id:d});break;case"addSektion":u.preview.send("sek-add-section",{location:o,level:a.data("sek-add")});break;case"sekToJson":u.preview.send("sek-to-json",{id:d});break;case"wpContent":u.preview.send("sek-notify",{type:"info",duration:8e3,message:sekPreviewLocalized.i18n["This content has been created with the WordPress editor."]});break;case"editWpContent":var c=a.closest("[data-sek-wp-edit-link]").data("sek-wp-edit-link");m.isEmpty(c)||window.open(c,"_blank");break;case"inactiveZone":u.preview.send("sek-click-on-inactive-zone")}})},_send_:function(e,t){u.preview.send("sek-"+t.action,{location:t.location,level:t.level,module_type:"module"==t.level?e.closest('div[data-sek-level="module"]').data("sek-module-type"):"",id:t.id,in_column:0<e.closest('div[data-sek-level="column"]').length?e.closest('div[data-sek-level="column"]').data("sek-id"):"",in_sektion:0<e.closest('div[data-sek-level="section"]').length?e.closest('div[data-sek-level="section"]').data("sek-id"):"",clicked_input_type:0<e.closest("div[data-sek-input-type]").length?e.closest("div[data-sek-input-type]").data("sek-input-type"):"",clicked_input_id:0<e.closest("div[data-sek-input-id]").length?e.closest("div[data-sek-input-id]").data("sek-input-id"):"",was_triggered:t.was_triggered})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,i,s){i.extend(SekPreviewPrototype,{setupLoader:function(){var t=this;this._css_loader_html='<div class="sek-css-loader sek-mr-loader" style="display:none"><div></div><div></div><div></div></div>',i("body").on(["sek-modules-refreshed","sek-columns-refreshed","sek-section-added","sek-level-refreshed","sek-stylesheet-refreshed","sek-ajax-error"].join(" "),function(e){t.cleanLoader()})},mayBePrintLoader:function(e){var t=this,a=e.loader_located_in_level_id;if(!s.isEmpty(a)){var n=i('[data-sek-id="'+a+'"]');0<n.length&&i(".sek-level-clone ").length<1&&($levelClone=i("<div>",{class:"sek-level-clone"}),n.find("[data-sek-level]").each(function(){i(this).addClass("sek-refreshing")}),n.prepend($levelClone),$levelClone.css({width:n.outerWidth()+"px",height:n.outerHeight()+"px"}).append(t._css_loader_html).find(".sek-css-loader").fadeIn("fast"),clearTimeout(i.data(this,"_nimble_loader_active_timer_")),i.data(this,"_nimble_loader_active_timer_",setTimeout(function(){t.cleanLoader()},4e3)))}},cleanLoader:function(){i(".sek-level-clone").remove(),i("[data-sek-level]").each(function(){i(this).removeClass("sek-refreshing")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(s,r,d){r.extend(SekPreviewPrototype,{schedulePanelMsgReactions:function(){var o=this,e={"sek-add-section":"ajaxAddSektion","sek-add-content-in-new-sektion":"ajaxAddSektion","sek-add-content-in-new-nested-sektion":"ajaxAddSektion","sek-add-column":"ajaxRefreshColumns","sek-add-module":"ajaxRefreshModulesAndNestedSections","sek-refresh-stylesheet":"ajaxRefreshStylesheet","sek-resize-columns":"ajaxResizeColumns","sek-remove":function(e){var t,a=e.apiParams.id,n=r('div[data-sek-id="'+a+'"]');switch(e.apiParams.action){case"sek-remove-section":o.mayBePrintLoader({loader_located_in_level_id:e.apiParams.location}),!0===e.apiParams.is_nested?t=o.ajaxRefreshModulesAndNestedSections(e):((d.isEmpty(a)||n.length<1)&&o.errare("reactToPanelMsg => sek-remove => invalid candidate id => ",a),r("body").find(n).remove(),r('[data-sek-id="'+e.apiParams.location+'"]').trigger("sek-level-refreshed"));break;case"sek-remove-column":t=o.ajaxRefreshColumns(e);break;case"sek-remove-module":t=o.ajaxRefreshModulesAndNestedSections(e)}return d.isEmpty(t)?r.Deferred(function(){this.resolve()}):t},"sek-duplicate":function(e){var t;switch(e.apiParams.action){case"sek-duplicate-section":e.apiParams.id=e.cloneId,t=o.ajaxAddSektion(e);break;case"sek-duplicate-column":e.apiParams.id=e.cloneId,t=o.ajaxRefreshColumns(e);break;case"sek-duplicate-module":e.apiParams.id=e.cloneId,t=o.ajaxRefreshModulesAndNestedSections(e)}return t},"sek-refresh-level":function(s){return o.mayBePrintLoader({loader_located_in_level_id:s.apiParams.id}),o.doAjax({skope_id:s.skope_id,action:"sek_get_content",id:s.apiParams.id,level:s.apiParams.level,sek_action:s.apiParams.action}).fail(function(e){o.errare("ERROR reactToPanelMsg => sek-refresh-level => ",e),r('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-ajax-error")}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:o.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e);var a='<span class="sek-placeholder" data-sek-placeholder-for="'+s.apiParams.id+'"></span>',n=r('div[data-sek-id="'+s.apiParams.id+'"]');if(n.length<1)o.errare("reactToPanelMsg => sek-refresh-level ajax done => the level to refresh is not rendered in the page",e);else{n.before(a);var i=r('[data-sek-placeholder-for="'+s.apiParams.id+'"]');n.remove(),d.isUndefined(t)?o.errare("reactToPanelMsg => sek-refresh-level ajax done => missing html_content",e):i.after(t),i.remove(),r('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-level-refreshed",{level:s.apiParams.level,id:s.apiParams.id})}})},"sek-move":function(e){switch(e.apiParams.action){case"sek-move-column":if(e.apiParams.from_sektion!=e.apiParams.to_sektion){var t=r.extend(!0,{},e),a=r.extend(!0,{},e);r('[data-sek-id="'+e.apiParams.from_sektion+'"]',".sektion-wrapper").find('div[data-sek-level="column"]').length<1?s.preview.send("sek-add-column",{in_sektion:e.apiParams.from_sektion,autofocus:!1}):(t.apiParams=d.extend(t.apiParams,{in_sektion:e.apiParams.from_sektion,action:"sek-refresh-columns-in-sektion"}),o.ajaxRefreshColumns(t)),a.apiParams=d.extend(a.apiParams,{in_sektion:e.apiParams.to_sektion,action:"sek-refresh-columns-in-sektion"}),o.ajaxRefreshColumns(a)}break;case"sek-move-module":var n=r.extend(!0,{},e),i=r.extend(!0,{},e);n.apiParams.from_column!=n.apiParams.to_column&&(n.apiParams=d.extend(n.apiParams,{in_column:n.apiParams.from_column,in_sektion:n.apiParams.from_sektion,action:"sek-refresh-modules-in-column"}),o.ajaxRefreshModulesAndNestedSections(n)),e.apiParams=d.extend(i.apiParams,{in_column:i.apiParams.to_column,in_sektion:i.apiParams.to_sektion,action:"sek-refresh-modules-in-column"}),o.ajaxRefreshModulesAndNestedSections(i),r('[data-sek-id="'+e.apiParams.to_column+'"]',".sektion-wrapper").find(".sek-column-inner").sortable("refresh")}},"sek-edit-options":function(e){o.activeLevelUI(e.uiParams.id)},"sek-edit-module":function(e){o.activeLevelUI(e.uiParams.id)},"sek-drag-start":function(e){var t=1;r(".sektion-wrapper").children('[data-sek-level="section"]').each(function(){r('[data-drop-zone-before-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).before('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-before-section="'+r(this).data("sek-id")+'"></div>'),t==r(".sektion-wrapper").children('[data-sek-level="section"]').length&&r(this).after('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-after-section="'+r(this).data("sek-id")+'"></div>'),t++}),r(".sek-empty-location-placeholder").each(function(){r.when(r(this).append('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="in-empty-location"></div>'))}),"module"==e.type&&r('[data-sek-level="column"]').each(function(){var e=r(this).children(".sek-column-inner").children('[data-sek-level="module"]'),t=r(this).children(".sek-column-inner").children('[data-sek-is-nested="true"]');e=e.add(t);var a=1;e.each(function(){r('[data-drop-zone-before-module-or-nested-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).before('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-before-module-or-nested-section="'+r(this).data("sek-id")+'"></div>'),a==e.length&&r('[data-drop-zone-after-module-or-nested-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).after('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-after-module-or-nested-section="'+r(this).data("sek-id")+'"></div>'),a++})}),r("body").addClass("sek-dragging"),d.delay(function(){r(".sek-dynamic-drop-zone").css({opacity:1})},100)},"sek-drag-stop":function(e){r("body").removeClass("sek-dragging"),r(".sortable-placeholder").remove(),r(".sek-dynamic-drop-zone").remove()},"sek-focus-on":function(e){0<r('div[data-sek-id="'+e.id+'"]').length&&r("html, body").animate({scrollTop:r('div[data-sek-id="'+e.id+'"]').offset().top-100},"slow")}};d.each(e,function(e,n){s.preview.bind(n,function(a){a=d.extend({skope_id:"",apiParams:{},uiParams:{}},a||{});try{r.when(d.isFunction(e)?e(a):o[e].call(o,a)).done(function(e){var t;t=e,s.preview.send([n,"done"].join("_"),a),d.isUndefined(t)||t.data&&t.data.setting_validities&&s.preview.send("selective-refresh-setting-validities",t.data.setting_validities)}).fail(function(){s.preview.send("sek-notify",{type:"error",duration:1e4,message:sekPreviewLocalized.i18n["Something went wrong, please refresh this page."]})}).then(function(){s.preview.trigger("control-panel-requested-action-done",{action:n,args:a})})}catch(e){o.errare("reactToPanelMsg => Error when firing the callback of "+n,e)}})})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,r){o.extend(SekPreviewPrototype,{ajaxAddSektion:function(i){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:i.apiParams.location}),s.doAjax({action:"sek_get_content",id:i.apiParams.id,in_sektion:i.apiParams.in_sektion,in_column:i.apiParams.in_column,skope_id:i.skope_id,sek_action:i.apiParams.action,is_nested:i.apiParams.is_nested}).done(function(e){var t,a="";if(e.data&&e.data.contents?a=e.data.contents:s.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e),i.apiParams.is_nested){(t=o(".sektion-wrapper").find('div[data-sek-id="'+i.apiParams.in_column+'"]')).length<1&&s.errare("preview => reactToPanelMsg => sek-add-column => no DOM node for parent column => ",i.apiParams.in_column);var n='<span class="sek-placeholder" data-sek-placeholder-for="'+i.apiParams.in_column+'"></span>';t.before(n),t.remove(),o(".sektion-wrapper").find(".sek-placeholder").after(a),o(".sektion-wrapper").find(".sek-placeholder").remove()}else"sek-duplicate-section"!=i.apiParams.action||r.isEmpty(i.cloneId)?($beforeCandidate=o('.sektion-wrapper[data-sek-id="'+i.apiParams.location+'"]').find('div[data-sek-id="'+i.apiParams.before_section+'"]'),$afterCandidate=o('.sektion-wrapper[data-sek-id="'+i.apiParams.location+'"]').find('div[data-sek-id="'+i.apiParams.after_section+'"]'),!r.isEmpty(i.apiParams.before_section)&&0<$beforeCandidate.length?$beforeCandidate.before(a):!r.isEmpty(i.apiParams.after_section)&&0<$afterCandidate.length?$afterCandidate.after(a):o('[data-sek-id="'+i.apiParams.location+'"]').append(a)):o(".sektion-wrapper").find('div[data-sek-id="'+i.apiParams.in_sektion+'"]').after(a);"sek-duplicate-section"==i.apiParams.action&&o('div[data-sek-id="'+i.cloneId+'"]',".sektion-wrapper").each(function(){o(this).trigger("sek-columns-refreshed")}),i.apiParams.is_nested&&(s.makeModulesSortableInColumn(i.apiParams.in_column),o(".sektion-wrapper").find('div[data-sek-id="'+i.apiParams.in_sektion+'"]').each(function(){s.maybeMakeColumnResizableInSektion.call(this)})),i.cloneId&&o('div[data-sek-id="'+i.cloneId+'"]').trigger("sek-section-added",i),o('div[data-sek-id="'+i.apiParams.id+'"]').trigger("sek-section-added",i)}).fail(function(e){s.errare("ERROR in sek_get_html_for_injection ? ",e),o('[data-sek-id="'+i.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(o,r,e){r.extend(SekPreviewPrototype,{ajaxRefreshColumns:function(i){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:i.apiParams.in_sektion}),s.doAjax({action:"sek_get_content",id:i.apiParams.id,in_sektion:i.apiParams.in_sektion,skope_id:i.skope_id,sek_action:i.apiParams.action}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:s.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e);var a=r('div[data-sek-id="'+i.apiParams.in_sektion+'"]');a.length<1&&s.errare("reactToPanelMsg => "+i.apiParams.action+" => no DOM node for parent sektion => ",i.apiParams.in_sektion);var n='<span class="sek-placeholder" data-sek-placeholder-for="'+i.apiParams.in_sektion+'"></span>';a.before(n),a.remove(),r(".sektion-wrapper").find(".sek-placeholder").after(t),r(".sektion-wrapper").find(".sek-placeholder").remove(),o.preview.trigger("sek-refresh-stylesheet",i),r('div[data-sek-id="'+i.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed",{in_sektion:i.apiParams.in_sektion})}).fail(function(e){s.errare("ERROR reactToPanelMsg => sek-add-column => ",e),r('[data-sek-id="'+i.apiParams.id+'"]').trigger("sek-ajax-error")})},ajaxResizeColumns:function(a){var n=this;return n.mayBePrintLoader({loader_located_in_level_id:a.apiParams.in_sektion}),n.doAjax({action:"sek_get_content",resized_column:a.apiParams.resized_column,sister_column:a.apiParams.sister_column,skope_id:a.skope_id,sek_action:"sek-resize-columns"}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:n.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e),r('[data-sek-id="'+a.apiParams.resized_column+'"]').css({width:"",height:""}),n.appendDynStyleSheet(a.skope_id,t),r('div[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed")}).fail(function(e){n.errare("ERROR reactToPanelMsg => sek-resize-columns => ",e),r('[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,t){o.extend(SekPreviewPrototype,{ajaxRefreshModulesAndNestedSections:function(i){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:i.apiParams.in_column}),s.doAjax({action:"sek_get_content",id:i.apiParams.id,in_sektion:i.apiParams.in_sektion,in_column:i.apiParams.in_column,skope_id:i.skope_id,sek_action:i.apiParams.action,is_nested:i.apiParams.is_nested}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:s.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e);var a=o('[data-sek-id="'+i.apiParams.in_column+'"]');a.length<1&&s.errare("reactToPanelMsg => ajaxRefreshModulesAndNestedSections => no DOM node for parent column => ",i.apiParams.in_column);var n='<span class="sek-placeholder" data-sek-placeholder-for="'+i.apiParams.in_column+'"></span>';a.before(n),a.remove(),o('[data-sek-placeholder-for="'+i.apiParams.in_column+'"]').after(t),o('[data-sek-placeholder-for="'+i.apiParams.in_column+'"]').remove(),o('[data-sek-id="'+i.apiParams.in_column+'"]').trigger("sek-modules-refreshed",{in_column:i.apiParams.in_column,in_sektion:i.apiParams.in_sektion})}).fail(function(e){s.errare("ERROR reactToPanelMsg => sek-add-module => ",e),o('[data-sek-id="'+i.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,i,s){i.extend(SekPreviewPrototype,{ajaxRefreshStylesheet:function(a){var n=this;return n.mayBePrintLoader({loader_located_in_level_id:a.apiParams.id}),n.doAjax({action:"sek_get_content",skope_id:a.skope_id,sek_action:"sek-refresh-stylesheet"}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:n.errare("SekPreviewPrototype => ajax_response.data.contents is undefined ",e),n.appendDynStyleSheet(a.skope_id,t),i('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-stylesheet-refreshed",{level:a.apiParams.level,id:a.apiParams.id})}).fail(function(e){n.errare("sek-refresh-stylesheet fail !"),i('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-ajax-error")})},appendDynStyleSheet:function(e,t){var a="#sek-"+e,n="#sek-gfonts-"+e;0<i("head").find(a).length&&i("head").find(a).remove(),0<i("head").find(n).length&&i("head").find(n).remove(),i("head").append(t),!s.isEmpty(t)&&i("head").find(a).length<1?this.errare("sek-preview => problem when printing the dynamic inline style for : "+a):i("head").find(a).attr("sek-data-origin","customizer")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,r){o.extend(SekPreviewPrototype,{parseTemplate:r.memoize(function(t){var a,n=this,i={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){if(o(t).length<1)return n.errare("preview => parseTemplate => the requested tmpl does not exist =>"+t),"";try{a=a||r.template(o(t).html(),i)}catch(e){n.errare("preview => parseTemplate => problem when parsing tmpl =>"+t,e)}return a(e)}}),_prettyPrintLog:function(e){e=r.extend({bgCol:"#5ed1f5",textCol:"#000",consoleArguments:[]},e);var t,a=Array.from(e.consoleArguments);return a=r.isEmpty(r.filter(a,function(e){return!r.isString(e)}))?a.join(" "):JSON.stringify(a.join(" ")),["%c "+(t=a,r.isString(t)?300<t.length?t.substr(0,299)+"...":t:""),["background:"+e.bgCol,"color:"+e.textCol,"display: block;"].join(";")]},_wrapLogInsideTags:function(e,t,a){r.isUndefined(console)&&"function"!=typeof window.console.log||(sekPreviewLocalized.isDevMode?r.isUndefined(t)?console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})):(console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})),console.log(t),console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["</"+e+">"]}))):console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:[e]})))},errare:function(e,t){this._wrapLogInsideTags(e,t,"#ffd5a0")},infoLog:function(e,t){this._wrapLogInsideTags(e,t,"#5ed1f5")},doAjax:function(e){var t=this,a=(e=e||(r.isObject(e)?e:{})).ajaxUrl||sekPreviewLocalized.ajaxUrl,n=sekPreviewLocalized.frontNonce,i=o.Deferred(),s=r.extend({action:"",withNonce:!1},e);return"https:"==document.location.protocol&&(a=a.replace("http://","https://")),r.isEmpty(s.action)||!r.isString(s.action)?(t.errare("self.doAjax : unproper action provided"),i.resolve().promise()):(s[n.id]=n.handle,!r.isObject(n)||r.isUndefined(n.id)||r.isUndefined(n.handle)?(t.errare("self.doAjax : unproper nonce"),i.resolve().promise()):(o.post(a,s).done(function(e){"0"!==e&&"-1"!==e&&!1!==e.success||(t.errare("self.doAjax : done ajax error for action : "+s.action,e),i.reject(e)),i.resolve(e)}).fail(function(e){t.errare("self.doAjax : failed ajax error for : "+s.action,e),i.reject(e)}),i.promise()))},isModuleRegistered:function(e){return sekPreviewLocalized.registeredModules&&!r.isUndefined(sekPreviewLocalized.registeredModules[e])},getRegisteredModuleProperty:function(e,t){return this.isModuleRegistered(e)?sekPreviewLocalized.registeredModules[e][t]:"not_set"}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,t,a){t.extend(SekPreviewPrototype,e.Events);var n=e.Class.extend(SekPreviewPrototype);e.bind("preview-ready",function(){e.preview.bind("active",function(){try{e.sekPreview=new n}catch(e){SekPreviewPrototype.errare("SekPreviewConstructor => problem on instantiation",e)}})})}(wp.customize,jQuery,_);