var SekPreviewPrototype=SekPreviewPrototype||{};!function(a,s,i){s.extend(SekPreviewPrototype,{cachedElements:{$body:s("body"),$window:s(window)},initialize:function(){var t=this;try{this.skope_id=i.findWhere(_wpCustomizeSettings.czr_new_skopes,{skope:"local"}).skope_id}catch(e){return void this.errare("Preview => error when storing the skope_id",e)}this.scheduleHighlightActiveLevel(),t.setupLoader(),s(function(){t.setupSortable(),t.setupResizable(),t.setupUiHoverVisibility(),t.scheduleUiClickReactions(),t.schedulePanelMsgReactions()}),t.cachedElements.$body.on("sek-columns-refreshed sek-modules-refreshed",function(e,t){if(!i.isUndefined(t)&&!i.isUndefined(t.in_sektion)&&0<s('[data-sek-id="'+t.in_sektion+'"]').length){var a=s('[data-sek-id="'+t.in_sektion+'"]');a.toggleClass("sek-has-modules",0<a.find('[data-sek-level="module"]').length)}}),t.deactivateLinks(),t.cachedElements.$body.on(["sek-modules-refreshed","sek-columns-refreshed","sek-section-added","sek-level-refreshed","sek-edit-module"].join(" "),function(e){t.deactivateLinks(e)});var e=function(){var e=[],t=[];s('[data-sek-level="location"]').each(function(){e.push(s(this).data("sek-id")),t.push({id:s(this).data("sek-id"),is_global:!0===s(this).data("sek-is-global-location"),is_header_footer:!0===s(this).data("sek-is-header-location")||!0===s(this).data("sek-is-footer-location")})}),a.preview.send("sek-active-locations-in-preview",{active_locations:e,active_locs_info:t})};a.preview.bind("sek-request-active-locations",e),e()},deactivateLinks:function(e){e=e||{};this.cachedElements.$body.find('[data-sek-level="module"]').each(function(){s(this).find("a").each(function(){try{(function(){if("yes"!==s(this).data("sek-unlinked")){var e=i.isString(s(this)[0].protocol)&&-1!==s(this)[0].protocol.indexOf("javascript");!e&&a.isLinkPreviewable(s(this)[0])?(s(this).addClass("nimble-shift-clickable"),s(this).data("sek-unlinked","yes").attr("data-nimble-href",s(this).attr("href")).attr("href","javascript:void(0)"),s(this).removeAttr("target"),s(this).hover(function(){s(this).attr("title",sekPreviewLocalized.i18n["Shift-click to visit the link"])},function(){s(this).removeAttr("title")}),s(this).on("click",function(e){e.shiftKey&&(e.preventDefault(),window.location.href=s(this).attr("data-nimble-href"))})):(s(this).addClass("nimble-unclickable"),s(this).data("sek-unlinked","yes").attr("data-nimble-href",s(this).attr("href")).attr("href","javascript:void(0)"),s(this).hover(function(){s(this).attr("title",e?sekPreviewLocalized.i18n["Link deactivated while previewing"]:sekPreviewLocalized.i18n["External links are disabled when customizing"])},function(){s(this).removeAttr("title")}),s(this).on("click",function(e){e.preventDefault()}))}}).call(s(this))}catch(e){a.errare("::deactivateLinks => error ",e)}})})},scheduleHighlightActiveLevel:function(){var n=this;this.activeLevelUI=new a.Value(""),this.activeUIChangedRecently=new a.Value(!1),this.activeLevelUI.bind(function(e,t){var a=s('[data-sek-id="'+e+'"]'),i=s('[data-sek-id="'+t+'"]');0<a.length&&a.addClass("sek-active-ui sek-highlight-active-ui"),0<i.length&&i.removeClass("sek-active-ui sek-highlight-active-ui"),n.activeUIChangedRecently(Date.now())}),i.each(["sek-refresh-stylesheet","sek-refresh-level"],function(e){a.preview.bind(e,function(e){n.activeUIChangedRecently(Date.now())})}),this.activeUIChangedRecently.bind(function(e){var t=s('[data-sek-id="'+n.activeLevelUI()+'"]');s(".sek-highlight-active-ui").length&&s(".sek-highlight-active-ui").removeClass("sek-highlight-active-ui"),0<t.length&&t.toggleClass("sek-highlight-active-ui",!1!==e),clearTimeout(s.data(this,"_ui_change_timer_")),s.data(this,"_ui_change_timer_",setTimeout(function(){n.activeUIChangedRecently(!1)},3e3))})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(m,h,p){h.extend(SekPreviewPrototype,{setupSortable:function(){var a=this;return this.sortableDefaultParams={placeholder:"sortable-placeholder",over:function(e,t){},cursorAt:{top:0,left:0},tolerance:"pointer"},h('[data-sek-level="location"]').each(function(){a.makeSektionsSortableInLocation(h(this).data("sek-id"))}),a.cachedElements.$body.on("sek-section-added sek-level-refreshed sek-location-refreshed",'[data-sek-level="location"]',function(e,t){a.makeSektionsSortableInLocation(h(this).data("sek-id"))}),h('[data-sek-level="location"]').each(function(){h(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(h(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-columns-refreshed sek-section-added",'[data-sek-level="section"]',function(e){a.makeColumnsSortableInSektion(h(this).data("sek-id"))}),a.cachedElements.$body.on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){h(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(h(this).data("sek-id"))})}),h('[data-sek-level="location"]').each(function(){h(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-modules-refreshed",'[data-sek-level="column"]',function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))}),a.cachedElements.$body.on("sek-columns-refreshed",'[data-sek-level="section"]',function(){h(this).find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){h(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-section-added",'[data-sek-level="location"]',function(e,t){h(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-location-refreshed",'[data-sek-level="location"]',function(e,t){h(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(h(this).data("sek-id"))})}),this},printAllLevelsUi:function(){var e=this;e.cachedElements.$body.find("[data-sek-level]").each(function(){e.printLevelUI(h(this)),h(this).find(".sek-dyn-ui-wrapper").stop(!0,!0).show()})},makeSektionsSortableInLocation:function(e){var a,i,t,n=this,s=[];!0!==h('[data-sek-id="'+e+'"]').data("sek-is-global-location")&&(t=h.extend(!0,{},n.sortableDefaultParams),h('[data-sek-id="'+e+'"]').sortable(p.extend(t,{items:'[data-sek-level="section"]',handle:".sek-move-section",connectWith:'[data-sek-is-global-location="false"]',placeholder:{element:function(e){return h('<div class="sortable-placeholder"><div class="sek-module-placeholder-content"><p>'+sekPreviewLocalized.i18n["Insert here"]+"</p></div></div>")[0]},update:function(e,t){}},start:function(e,t){n.cachedElements.$body.addClass("sek-moving-section"),n.isDraggingElement=!0,$sourceLocation=t.item.closest('[data-sek-level="location"]'),a=$sourceLocation.data("sek-id"),n.printAllLevelsUi()},stop:function(e,t){n.cachedElements.$body.removeClass("sek-moving-section"),n.isDraggingElement=!1,s=[],$targetLocation=t.item.closest('[data-sek-level="location"]'),i=$targetLocation.data("sek-id"),$targetLocation.children('[data-sek-level="section"]').each(function(){s.push(h(this).data("sek-id"))}),m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"section",newOrder:s,from_location:a,to_location:i})},over:function(e,t){t.placeholder.addClass("sek-sortable-section-over")},out:function(e,t){t.placeholder.removeClass("sek-sortable-section-over")}})))},makeColumnsSortableInSektion:function(e){var a,i,n,s,o=this,t=h.extend(!0,{},o.sortableDefaultParams),d=[],r=[],l=h('[data-sek-id="'+e+'"]').find(".sek-sektion-inner").first(),c=function(e){if(e=h.extend({forTarget:!0},e||{}),!p.isEmpty(h(this).data("_sortable_columns_css_classes_")))return h(this).data("_sortable_columns_css_classes_");var t,a=h(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length,i=Math.floor(100/a);t=!0===e.forTarget?12<a+1?12:a+1:a-1<1?1:a-1;var n={current:"sek-col-"+i,next:"sek-col-"+Math.floor(100/t)};return h(this).data("_sortable_columns_css_classes_",n),n};l.sortable(p.extend(t,{handle:".sek-move-column",connectWith:".sek-sektion-inner",over:function(e,t){var a,i=h(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==h(this).data("sek-is-sender")?(a=c.call(h(this)),p.isEmpty(a)||i.each(function(){h(this).removeClass(a.current).addClass(a.next)})):(a=c.call(h(this),{forTarget:!1}),p.isEmpty(a)||i.each(function(){h(this).addClass(a.current).removeClass(a.next)}))},out:function(e,t){var a,i=h(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==h(this).data("sek-is-sender")?(a=c.call(h(this)),p.isEmpty(a)||i.each(function(){h(this).addClass(a.current).removeClass(a.next)})):(a=c.call(h(this),{forTarget:!1}),p.isEmpty(a)||i.each(function(){h(this).removeClass(a.current).addClass(a.next)}))},remove:function(e,t){n=t.item.closest('[data-sek-level="location"]'),to_location=n.data("sek-id"),s=!0===n.data("sek-is-global-location");var a=to_location!=from_location;return i!==s||!0===i&&!0===s&&a?(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["Moving elements between global and local sections is not allowed."]}),!1):($targetSektionCandidate=t.item.closest('[data-sek-level="section"]'),!(0<$targetSektionCandidate.length&&12<$targetSektionCandidate.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length)||(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["You've reached the maximum number of columns allowed in this section."]}),!1))},start:function(e,t){a=t.item.closest('[data-sek-level="location"]'),from_location=a.data("sek-id"),i=!0===a.data("sek-is-global-location"),d=[],r=[],from_sektion=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){d.push(h(this).data("sek-id"))}),h(this).data("sek-is-sender",!0),p.isEmpty(d)?o.errare("column sortable => startOrder should not be empty"):o.printAllLevelsUi()},stop:function(e,t){$targetSektion=t.item.closest('[data-sek-level="section"]'),to_sektion=$targetSektion.data("sek-id"),$targetSektion.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){r.push(h(this).data("sek-id"))});var a,i=h(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==h(this).data("sek-is-sender")?(a=c.call(h(this)),p.isEmpty(a)||i.each(function(){h(this).removeClass(a.current).addClass(a.next)})):(a=c.call(h(this),{forTarget:!1}),p.isEmpty(a)||i.each(function(){h(this).addClass(a.current).removeClass(a.next)})),h('[data-sek-level="section"]').find(".sek-sektion-inner").each(function(){h(this).data("sek-is-sender",null).data("_sortable_columns_css_classes_",null)}),p.isEmpty(r)?o.errare("column sortable =>  newOrder should not be empty"):p.isEqual(r,d)&&to_sektion===from_sektion?sekPreviewLocalized.isDevMode&&o.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"column",newOrder:r,from_sektion:from_sektion,to_sektion:to_sektion}),h('div[data-sek-id="'+from_sektion+'"]').trigger("sek-level-refreshed"),from_sektion!==to_sektion&&h('div[data-sek-id="'+to_sektion+'"]').trigger("sek-level-refreshed"))}}))},makeModulesSortableInColumn:function(e){var a,i,n,s,t,o,d,r,l,c=[],k=[],u=this;t=h.extend(!0,{},u.sortableDefaultParams),h('[data-sek-id="'+e+'"]').find(".sek-column-inner").first().sortable(p.extend(t,{handle:".sek-move-module",connectWith:".sek-column-inner",over:function(e,t){h('[data-sek-level="location"]').find(".sek-sortable-overing").each(function(){h(this).removeClass("sek-sortable-overing")}),h(e.target).addClass("sek-sortable-overing")},remove:function(e,t){r=t.item.closest('[data-sek-level="location"]'),to_location=r.data("sek-id"),l=!0===r.data("sek-is-global-location");var a=to_location!=from_location;return!(d!==l||!0===d&&!0===l&&a)||(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["Moving elements between global and local sections is not allowed."]}),!1)},start:function(e,t){o=t.item.closest('[data-sek-level="location"]'),from_location=o.data("sek-id"),d=!0===o.data("sek-is-global-location"),c=[],k=[],u.cachedElements.$body.addClass("sek-dragging-element"),i=t.item.closest('[data-sek-level="column"]').data("sek-id"),a=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="column"]').find(".sek-column-inner").first().children('[data-sek-level="module"]').each(function(){c.push(h(this).data("sek-id"))}),p.isEmpty(c)?u.errare("makeModulesSortableInColumn => startOrder should not be empty"):u.printAllLevelsUi()},stop:function(e,t){s=t.item.closest('[data-sek-level="column"]'),n=s.data("sek-id"),s.find(".sek-column-inner").first().children("[data-sek-id]").each(function(){k.push(h(this).data("sek-id"))}),p.isEmpty(k)?u.errare("makeModulesSortableInColumn => newOrder should not be empty"):p.isEqual(k,c)&&n===i?u.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"module",newOrder:k,from_column:i,to_column:n,from_sektion:a,to_sektion:t.item.closest('[data-sek-level="section"]').data("sek-id")}),u.cachedElements.$body.removeClass("sek-dragging-element"))}})),h('[data-sek-id="'+e+'"]').addClass("sek-module-sortable-setup")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupResizable:function(){var t=this;return c(".sektion-wrapper").find('div[data-sek-level="section"]').each(function(){t.maybeMakeColumnResizableInSektion.call(this)}),t.cachedElements.$body.on("sek-level-refreshed sek-modules-refreshed sek-columns-refreshed sek-section-added sek-location-refreshed",'[data-sek-level="location"]',function(e){c(this).find('[data-sek-level="section"]').each(function(){t.maybeMakeColumnResizableInSektion.call(this)})}),this},maybeMakeColumnResizableInSektion:function(){var a,i,n,s,o,d,r,e=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]');if(!(e.length<2)){var t=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').last();e.not(t).each(function(){c(this).resizable({resize:function(e,t){c(".sektion-wrapper").data("sek-resizing-columns",!0)},start:function(e,t){if(a=t.element.closest('div[data-sek-level="section"]'),a.data("sek-id"),i=a.find(".sek-sektion-inner")[0].getBoundingClientRect().width,!((o=a.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length)<2)){if((n=t.element.closest('div[data-sek-level="column"]')).length<1)throw new Error("ERROR => resizable => No valid level dom element found");r=n.index()+1==o,d=r?n.prev():n.next(),c(".sektion-wrapper").data("sek-resizing-columns",!0),k.delay(function(){c(".sektion-wrapper").data("sek-resizing-columns",!1)},3e3)}},stop:function(e,t){if(!(o<2)){if(n.length<1)throw new Error("ERROR => resizable => No valid level dom element found");n.css({width:"",height:""}),s=(parseFloat(t.size.width)/parseFloat(i)*100).toFixed(3),l.preview.send("sek-resize-columns",{action:"sek-resize-columns",level:n.data("sek-level"),in_sektion:a.data("sek-id"),id:n.data("sek-id"),resized_column:n.data("sek-id"),sister_column:d.data("sek-id"),resizedColumnWidthInPercent:s,col_number:o}),c(".sektion-wrapper").data("sek-resizing-columns",!1)}},helper:"ui-resizable-helper",handles:"e"});var e=c(this);k.delay(function(){e.find(".ui-resizable-handle").find(".fa-arrows-alt-h").length<1&&e.find(".ui-resizable-handle").append('<i class="fas fa-arrows-alt-h"></i>')},500)})}}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(c,h,p){h.extend(SekPreviewPrototype,{printLevelUI:function(e){var t,a,i,n;if((p.isUndefined(e)||e.length<1)&&this.errare("sekPreview::printeLevelUI => invalid level element => ",e),"location"!=(a=e.data("sek-level"))&&!(0<(n=e).children(".sek-dyn-ui-wrapper").length)){var s=n[0].getBoundingClientRect(),o=n.data("sek-level");switch(n.toggleClass("sek-shrink-my-ui",s.width&&s.width<("section"===o?350:"column"===o?300:200)),i={id:n.data("sek-id"),level:o},a){case"section":var d,r,l=n.closest('div[data-sek-level="location"]'),c=n.closest('div[data-sek-level="column"]'),k=!0===n.data("sek-is-nested");k?0<c.length&&(d=c.find(".sek-column-inner").first().children("div[data-sek-level]").length==n.index()+1,r=0===n.index()):0<l.length&&(d=l.children('div[data-sek-level="section"]').length==n.index()+1,r=0===n.index()),i=p.extend(i,{is_nested:k,can_have_more_columns:n.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,is_global_location:!0===l.data("sek-is-global-location"),is_last_section_in_parent:d,is_first_section_in_parent:r,is_header_location:!0===l.data("sek-is-header-location"),is_footer_location:!0===l.data("sek-is-footer-location")});break;case"column":var u=n.closest('div[data-sek-level="section"]');i=p.extend(i,{parent_can_have_more_columns:u.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,parent_is_single_column:u.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<2,parent_is_last_allowed_nested:!0===u.data("sek-is-nested"),has_nested_section:0<n.find('[data-sek-is-nested="true"]').length});break;case"module":var m=this.getRegisteredModuleProperty(n.data("sek-module-type"),"name");i=p.extend(i,{module_name:"not_set"!=m?m:""})}!0===h(".sektion-wrapper").data("sek-resizing-columns")&&p.contains(["column","module"],a)||(t=this.parseTemplate("#sek-dyn-ui-tmpl-"+a),h.when(n.prepend(t(i))).done(function(){n.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}},setupUiHoverVisibility:function(){var i,e,d=this,r=function(){(e=h(this)).children(".sek-dyn-ui-wrapper").length<1||sekPreviewLocalized.isPreviewUIDebugMode||d.isDraggingElement||(e.data("UIisFadingOut",!0),e.children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){h(this).remove(),e.data("UIisFadingOut",!1)}}))},n=function(){d.cachedElements.$body.stop(!0,!0).find(".sek-add-content-button").each(function(){h(this).fadeOut({duration:200,complete:function(){h(this).remove()}})})};d.cachedElements.$body.on("sek-location-refreshed sek-section-added sek-level-refreshed",'[data-sek-level="location"]',function(e,t){n()});var t,a=function(){var e=h(this);clearTimeout(e.data("_toggle_ui_menu_")),e.data("_toggle_ui_menu_",setTimeout(function(){s.call(e)},1e4))},s=function(e){var t=h(this),a=h(this).closest(".sek-dyn-ui-location-type"),i=t.closest(".sek-dyn-ui-wrapper").find(".sek-dyn-ui-inner");!0===e?(t.removeClass("sek-collapsed"),i.addClass("sek-is-expanded"),a.hide()):(t.addClass("sek-collapsed"),i.removeClass("sek-is-expanded"),a.show())};d.cachedElements.$body.on("click",".sek-dyn-ui-location-inner",function(e){var t=h(this).find(".sek-dyn-ui-hamb-menu-wrapper");h(this).closest('[data-sek-level="section"]').find(".sek-dyn-ui-hamb-menu-wrapper").each(function(){s.call(h(this))}),s.call(t,!0),a.call(t)}),d.cachedElements.$body.on("mouseenter mouseover mouseleave",".sek-dyn-ui-wrapper",p.throttle(function(e){var t=h(this).find(".sek-dyn-ui-hamb-menu-wrapper");p.isUndefined(t.data("_toggle_ui_menu_"))||t.hasClass("sek-collapsed")||0<t.length&&a.call(t)},50)),d.cachedElements.$body.on("click",".sek-minimize-ui",function(e){h(this).closest(".sek-dyn-ui-location-type").slideToggle("fast")}),d.cachedElements.$body.on("mouseenter",".sek-wp-content-wrapper",function(e){0<(t=h(this)).children(".sek-dyn-ui-wrapper").length&&!0!==t.data("UIisFadingOut")||(i=d.parseTemplate("#sek-dyn-ui-tmpl-wp-content"),h.when(t.prepend(i({}))).done(function(){t.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}).on("mouseleave",".sek-wp-content-wrapper",function(e){h(this).data("UIisFadingOut",!0),t=h(this),h(this).children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){h(this).remove(),t.data("UIisFadingOut",!1)}})});var l=function(s,e){var o,t=[];o=p.isUndefined(e)||e.length<1?(d.cachedElements.$body.find('[data-sek-level][data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]').each(function(){t.push(h(this))}),"printOrScheduleRemoval"):(t.push(e),"mayBeRemove"),p.each(t,function(e){var t=e[0].getBoundingClientRect(),a=s.x<=t.right&&t.left<=s.x,i=s.y>=t.top&&t.bottom>=s.y,n=e;switch(o){case"mayBeRemove":n.data("sek-ui-removal-scheduled",!1),a&&i||r.call(n);break;case"printOrScheduleRemoval":a&&i?(n.data("sek-ui-removal-scheduled",!1),d.printLevelUI(n)):!0!==n.data("sek-ui-removal-scheduled")&&(n.data("sek-ui-removal-scheduled",!0),n.children(".sek-dyn-ui-wrapper").find(".sek-is-expanded").length<1?l(s,n):p.delay(function(){!0===n.data("sek-ui-removal-scheduled")&&l(d.mouseMovedRecently(),n)},3500))}})};d.mouseMovedRecently=new c.Value({}),d.mouseMovedRecently.bind(function(e){var k,t,a;p.isEmpty(e)?sekPreviewLocalized.isPreviewUIDebugMode||(n(),d.cachedElements.$body.stop(!0,!0).find("[data-sek-level]").each(function(){h(this).children(".sek-dyn-ui-wrapper").find(".sek-is-expanded").length<1&&r.call(h(this))})):(d.cachedElements.$body.find('div[data-sek-level="location"]').each(function(){var e;$sectionCollection=h(this).children('div[data-sek-level="section"]'),i=d.parseTemplate("#sek-tmpl-add-content-button"),t=h(this).data("sek-id"),a=!0===h(this).data("sek-is-global-location"),$sectionCollection.each(function(){0<h(this).find(".sek-add-content-button").length||(h.when(h(this).prepend(i({location:t,is_global_location:a}))).done(function(){e=h(this).find(".sek-add-content-button"),h(this).data("sek-id")&&e.attr("data-sek-before-section",h(this).data("sek-id")),e.fadeIn(300)}),$sectionCollection.length==h(this).index()+1&&h.when(h(this).append(i({is_last:!0,location:t,is_global_location:a}))).done(function(){e=h(this).find(".sek-add-content-button").last(),h(this).data("sek-id")&&e.attr("data-sek-after-section",h(this).data("sek-id")),e.fadeIn(300)}))})}),h(".sek-empty-location-placeholder").each(function(){0<h(this).find(".sek-add-content-button").length||(t=h(this).closest('div[data-sek-level="location"]').data("sek-id"),a=!0===h(this).closest('div[data-sek-level="location"]').data("sek-is-global-location"),h.when(h(this).append(i({location:t,is_global_location:a}))).done(function(){$btn_el=h(this).find(".sek-add-content-button"),$btn_el.attr("data-sek-is-first-section",!0),$btn_el.fadeIn(300)}))}),k=e,d.cachedElements.$body.find(".sek-add-content-button").each(function(){var e=h(this)[0].getBoundingClientRect(),t=k.y,a=k.x,i=Math.abs(t-e.bottom),n=Math.abs(e.top-t),s=a-e.right,o=e.left-a,d=i<40||n<40,r=0<s&&s<40||0<o&&o<40,l=a<=e.right&&e.left<=a,c=t>=e.top&&e.bottom>=t;h(this).toggleClass("sek-mouse-is-close",(d||c)&&(r||l))}),l(e))});var o=function(){clearTimeout(d.cachedElements.$window.data("_scroll_move_timer_")),d.mouseMovedRecently.set({})};return d.cachedElements.$window.on("mousemove scroll",p.throttle(function(e){d.mouseMovedRecently({x:e.clientX,y:e.clientY}),clearTimeout(d.cachedElements.$window.data("_scroll_move_timer_")),d.cachedElements.$window.data("_scroll_move_timer_",setTimeout(function(){d.mouseMovedRecently.set({})},4e3))},50)),c.preview.bind("sek-drag-start",function(){o()}),d.cachedElements.$body.on("sek-section-added",'[data-sek-level="location"]',function(e,t){o()}),this}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(m,h,p){h.extend(SekPreviewPrototype,{scheduleUiClickReactions:function(){var u=this;u.cachedElements.$body.on("click",function(e){m.preview.send("sek-clean-target-drop-zone");var t,a="inactiveZone",i=h(e.target),n=i.closest('[data-sek-level="location"][data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]'),s=i.closest('[data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]'),o=i.closest("[data-sek-click-on]"),d=n.data("sek-id"),r=s.data("sek-level"),l=s.data("sek-id");switch(a="add-content"==i.data("sek-click-on")||0<i.closest("[data-sek-click-on]").length&&"add-content"==i.closest("[data-sek-click-on]").data("sek-click-on")?"addContentButton":!p.isEmpty(i.data("sek-click-on"))||0<o.length?"UIIcon":"module"==s.data("sek-level")?"moduleWrapper":"column"==s.data("sek-level")&&!0===s.data("sek-no-modules")?"noModulesColumn":i.hasClass("sek-to-json")?"sekToJson":"column"==s.data("sek-level")?"columnOutsideModules":"section"==s.data("sek-level")?"sectionOutsideColumns":p.isEmpty(i.data("sek-add"))?i.hasClass("sek-wp-content-wrapper")||i.hasClass("sek-wp-content-dyn-ui")?"wpContent":i.hasClass("sek-edit-wp-content")?"editWpContent":"inactiveZone":"addSektion",p.isEmpty(d)&&u.errare("::scheduleUiClickReactions => error location id can not be empty"),a){case"addContentButton":var c=!0===i.closest("[data-sek-is-first-section]").data("sek-is-first-section");m.preview.send("sek-add-section",{location:d,level:"section",before_section:i.closest("[data-sek-before-section]").data("sek-before-section"),after_section:i.closest("[data-sek-after-section]").data("sek-after-section"),is_first_section:c,send_to_preview:!c});break;case"UIIcon":if(s.length<1)throw new Error("ERROR => sek-front-preview => No valid level dom element found");if(t=i.closest("[data-sek-click-on]").data("sek-click-on"),p.isEmpty(t))throw new Error("Invalid action");if(p.isEmpty(r)||p.isEmpty(l))throw new Error("ERROR => sek-front-preview => No valid level id found");u._send_(i,{action:t,location:d,level:r,id:l,was_triggered:!1});break;case"moduleWrapper":if(0<i.parent(".sek-dyn-ui-icons").length)return;u._send_(i,{action:"edit-module",level:r,id:l});break;case"noModulesColumn":if(0<i.parent(".sek-dyn-ui-icons").length)return;u._send_(i,{action:"pick-content",content_type:"module",level:r,id:l});break;case"columnOutsideModules":case"sectionOutsideColumns":u._send_(i,{action:"edit-options",location:d,level:r,id:l});break;case"addSektion":m.preview.send("sek-add-section",{location:d,level:i.data("sek-add")});break;case"sekToJson":m.preview.send("sek-to-json",{id:l});break;case"wpContent":m.preview.send("sek-notify",{type:"info",duration:8e3,message:sekPreviewLocalized.i18n["This content has been created with the WordPress editor."]});break;case"editWpContent":var k=i.closest("[data-sek-wp-edit-link]").data("sek-wp-edit-link");p.isEmpty(k)||window.open(k,"_blank");break;case"inactiveZone":m.preview.send("sek-click-on-inactive-zone")}})},_send_:function(e,t){var a=h.extend(!0,{},t),i="",n=e.closest('div[data-sek-level="module"]'),s="module"===t.level?n.data("sek-module-type"):"";"module"===t.level&&"czr_tiny_mce_editor_module"===s&&(i=0<n.find("div[data-sek-input-id]").length?n.find("div[data-sek-input-id]").data("sek-input-id"):""),m.preview.send("sek-"+t.action,p.extend({location:t.location,level:t.level,id:t.id,content_type:e.data("sek-content-type"),module_type:s,in_column:0<e.closest('div[data-sek-level="column"]').length?e.closest('div[data-sek-level="column"]').data("sek-id"):"",in_sektion:0<e.closest('div[data-sek-level="section"]').length?e.closest('div[data-sek-level="section"]').data("sek-id"):"",clicked_input_type:0<e.closest("div[data-sek-input-type]").length?e.closest("div[data-sek-input-type]").data("sek-input-type"):"",clicked_input_id:0<e.closest("div[data-sek-input-id]").length?e.closest("div[data-sek-input-id]").data("sek-input-id"):"",was_triggered:t.was_triggered,syncedTinyMceInputId:i},a))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,s,o){s.extend(SekPreviewPrototype,{setupLoader:function(){var t=this;this._css_loader_html='<div class="sek-css-loader sek-mr-loader" style="display:none"><div></div><div></div><div></div></div>',t.cachedElements.$body.on(["sek-modules-refreshed","sek-columns-refreshed","sek-section-added","sek-level-refreshed","sek-stylesheet-refreshed","sek-ajax-error"].join(" "),function(e){t.cleanLoader()})},mayBePrintLoader:function(e){e=o.isObject(e)?e:{};var t=this,a=e.loader_located_in_level_id;if(!o.isEmpty(a)){var i=s('[data-sek-id="'+a+'"]');0<i.length&&s(".sek-level-clone ").length<1&&($levelClone=s("<div>",{class:"sek-level-clone"}),i.find("[data-sek-level]").each(function(){s(this).addClass("sek-refreshing")}),i.prepend($levelClone),$levelClone.css({width:i.outerWidth()+"px",height:i.outerHeight()+"px"}).append(t._css_loader_html).find(".sek-css-loader").fadeIn("fast"),clearTimeout(s.data(this,"_nimble_loader_active_timer_")),s.data(this,"_nimble_loader_active_timer_",setTimeout(function(){t.cleanLoader()},e.duration||4e3)))}if(!0===e.fullPageLoader){var n=s("<div>",{id:"nimble-full-page-loader-wrapper",class:"white-loader"});t.cachedElements.$body.append(n),n.fadeIn("fast").append(t._css_loader_html).find(".sek-css-loader").fadeIn("fast"),s('[data-sek-level="location"]').each(function(){s(this).addClass("sek-blur")}),clearTimeout(s.data(this,"_nimble_full_page_loader_active_timer_")),s.data(this,"_nimble_full_page_loader_active_timer_",setTimeout(function(){t.cleanLoader({cleanFullPageLoader:!0})},e.duration||6e3))}},cleanLoader:function(e){s(".sek-level-clone").remove(),s("[data-sek-level]").each(function(){s(this).removeClass("sek-refreshing")}),!0===(e=e||{}).cleanFullPageLoader&&(s('[data-sek-level="location"]').each(function(){s(this).removeClass("sek-blur")}),s("#nimble-full-page-loader-wrapper").remove())}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(o,r,l){r.extend(SekPreviewPrototype,{schedulePanelMsgReactions:function(){var d=this,e={"sek-add-section":"ajaxAddSektion","sek-add-content-in-new-sektion":"ajaxAddSektion","sek-add-content-in-new-nested-sektion":"ajaxAddSektion","sek-add-column":"ajaxRefreshColumns","sek-add-module":"ajaxRefreshModulesAndNestedSections","sek-refresh-stylesheet":"ajaxRefreshStylesheet","sek-resize-columns":"ajaxResizeColumns","sek-maybe-print-loader":function(e){try{d.mayBePrintLoader(e)}catch(e){o.errare("sek-clean-loader => error",e)}},"sek-clean-loader":function(e){try{d.cleanLoader(e)}catch(e){o.errare("sek-clean-loader => error",e)}},"sek-remove":function(e){var t,a=e.apiParams.id,i=r('div[data-sek-id="'+a+'"]');switch(e.apiParams.action){case"sek-remove-section":d.mayBePrintLoader({loader_located_in_level_id:e.apiParams.location}),!0===e.apiParams.is_nested?t=d.ajaxRefreshModulesAndNestedSections(e):((l.isEmpty(a)||i.length<1)&&d.errare("reactToPanelMsg => sek-remove => invalid candidate id => ",a),d.cachedElements.$body.find(i).remove(),r('[data-sek-id="'+e.apiParams.location+'"]').trigger("sek-level-refreshed"));break;case"sek-remove-column":t=d.ajaxRefreshColumns(e);break;case"sek-remove-module":t=d.ajaxRefreshModulesAndNestedSections(e)}return l.isEmpty(t)?r.Deferred(function(){this.resolve()}):t},"sek-duplicate":function(e){var t;switch(e.apiParams.action){case"sek-duplicate-section":e.apiParams.id=e.cloneId,t=d.ajaxAddSektion(e);break;case"sek-duplicate-column":e.apiParams.id=e.cloneId,t=d.ajaxRefreshColumns(e);break;case"sek-duplicate-module":e.apiParams.id=e.cloneId,t=d.ajaxRefreshModulesAndNestedSections(e)}return t},"sek-refresh-level":function(s){return d.mayBePrintLoader({loader_located_in_level_id:s.apiParams.id}),d.doAjax({location_skope_id:s.location_skope_id,local_skope_id:s.local_skope_id,action:"sek_get_content",id:s.apiParams.id,level:s.apiParams.level,sek_action:s.apiParams.action}).fail(function(e){d.errare("ERROR reactToPanelMsg => sek-refresh-level => ",e),r('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-ajax-error")}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(d.errare("SekPreviewPrototype::sek-refresh-level => ajax_response.data.contents is undefined ",e),d.errare("params ?",s));var a='<span class="sek-placeholder" data-sek-placeholder-for="'+s.apiParams.id+'"></span>',i=r('div[data-sek-id="'+s.apiParams.id+'"]');if(i.length<1)d.errare("reactToPanelMsg => sek-refresh-level ajax done => the level to refresh is not rendered in the page",e);else{i.before(a);var n=r('[data-sek-placeholder-for="'+s.apiParams.id+'"]');i.remove(),l.isUndefined(t)?d.errare("reactToPanelMsg => sek-refresh-level ajax done => missing html_content",e):n.after(t),n.remove(),r('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-level-refreshed",{level:s.apiParams.level,id:s.apiParams.id}),s.apiParams.moved_level_id&&o.preview.trigger("sek-animate-to-level",{id:s.apiParams.moved_level_id})}})},"sek-move":function(e){switch(e.apiParams.action){case"sek-move-column":if(e.apiParams.from_sektion!=e.apiParams.to_sektion){var t=r.extend(!0,{},e),a=r.extend(!0,{},e);r('[data-sek-id="'+e.apiParams.from_sektion+'"]',".sektion-wrapper").find('div[data-sek-level="column"]').length<1?o.preview.send("sek-add-column",{in_sektion:e.apiParams.from_sektion,autofocus:!1}):(t.apiParams=l.extend(t.apiParams,{in_sektion:e.apiParams.from_sektion,action:"sek-refresh-columns-in-sektion"}),d.ajaxRefreshColumns(t)),a.apiParams=l.extend(a.apiParams,{in_sektion:e.apiParams.to_sektion,action:"sek-refresh-columns-in-sektion"}),d.ajaxRefreshColumns(a)}break;case"sek-move-module":var i=r.extend(!0,{},e),n=r.extend(!0,{},e);i.apiParams.from_column!=i.apiParams.to_column&&(i.apiParams=l.extend(i.apiParams,{in_column:i.apiParams.from_column,in_sektion:i.apiParams.from_sektion,action:"sek-refresh-modules-in-column"}),d.ajaxRefreshModulesAndNestedSections(i)),e.apiParams=l.extend(n.apiParams,{in_column:n.apiParams.to_column,in_sektion:n.apiParams.to_sektion,action:"sek-refresh-modules-in-column"}),d.ajaxRefreshModulesAndNestedSections(n),r('[data-sek-id="'+e.apiParams.to_column+'"]',".sektion-wrapper").find(".sek-column-inner").sortable("refresh")}},"sek-edit-options":function(e){d.activeLevelUI(e.uiParams.id)},"sek-edit-module":function(e){d.activeLevelUI(e.uiParams.id)},"sek-drag-start":function(n){var s=1,o=!1;r('[data-sek-level="location"]').children('[data-sek-level="section"]').each(function(){var e=r(this).data("sek-id"),t=r(this).find('[data-sek-level="column"]').length,a=r(this).find('[data-sek-level="module"]').length,i=t<2&&a<1;!o&&!i&&r('[data-drop-zone-before-section="'+e+'"]').length<1&&r(this).before('<div class="sek-content-'+n.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-before-section="'+e+'"></div>'),i||s!=r(".sektion-wrapper").children('[data-sek-level="section"]').length||r(this).after('<div class="sek-content-'+n.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-after-section="'+e+'"></div>'),s++,o=i}),r(".sek-empty-location-placeholder").each(function(){r.when(r(this).append('<div class="sek-content-'+n.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="in-empty-location"></div>'))}),("module"==n.content_type||"preset_section"==n.content_type&&!0===n.eligible_for_module_dropzones)&&r('[data-sek-level="column"]').each(function(){var e=r(this).children(".sek-column-inner").children('[data-sek-level="module"]'),t=r(this).children(".sek-column-inner").children('[data-sek-is-nested="true"]');e=e.add(t);var a=1;e.each(function(){r('[data-drop-zone-before-module-or-nested-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).before('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-before-module-or-nested-section="'+r(this).data("sek-id")+'"></div>'),a==e.length&&r('[data-drop-zone-after-module-or-nested-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).after('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-after-module-or-nested-section="'+r(this).data("sek-id")+'"></div>'),a++})}),d.cachedElements.$body.addClass("sek-dragging"),l.delay(function(){r(".sek-dynamic-drop-zone").css({opacity:1})},100)},"sek-drag-stop":function(e){d.cachedElements.$body.removeClass("sek-dragging"),r(".sortable-placeholder").remove(),r(".sek-dynamic-drop-zone").remove()},"sek-animate-to-level":function(e){var t=r('[data-sek-id="'+e.id+'"]');0<t.length&&r("html, body").animate({scrollTop:t.offset().top-100},200)},"sek-clean-level-uis":function(e){r(".sek-dyn-ui-wrapper").each(function(){r(this).remove()})},"sek-display-level-ui":function(e){var t=r('[data-sek-id="'+e.id+'"]');0<t.length&&d.printLevelUI(t)},"sek-set-double-click-target":function(e){if(r(".sek-target-for-double-click-insertion").removeClass("sek-target-for-double-click-insertion"),l.isObject(e)&&e.id){var t=r('[data-sek-id="'+e.id+'"]');1===t.length&&t.addClass("sek-target-for-double-click-insertion")}},"sek-reset-double-click-target":function(e){r(".sek-target-for-double-click-insertion").removeClass("sek-target-for-double-click-insertion")},"sek-update-html-in-selector":function(e){var t,a=r('[data-sek-id="'+e.id+'"]');t=l.isEmpty(e.changed_item_id)?r(e.selector,a):r('[data-sek-item-id="'+e.changed_item_id+'"] '+e.selector,a),0<a.length&&0<t.length?t.html(e.html):d.errare("reactToPanelMsg => sek-update-html-in-selector => missing level or target dom element",e)},"sek-print-confettis":function(e){if(window.confetti&&window.requestAnimationFrame){var t=(e=e||{}).duration||Date.now()+1e3,a=["#f18700","#684F2F","#eea236"];!function e(){confetti({particleCount:2,angle:60,spread:55,origin:{x:0,y:.8},colors:a}),confetti({particleCount:4,angle:120,spread:55,origin:{x:1,y:.8},colors:a}),Date.now()<t&&window.requestAnimationFrame(e)}()}}};l.each(e,function(e,i){o.preview.bind(i,function(a){a=l.extend({location_skope_id:"",apiParams:{},uiParams:{}},a||{});d.cachedElements.$body.addClass(i);try{r.when(l.isFunction(e)?e(a):d[e].call(d,a)).done(function(e){var t;t=e,o.preview.send([i,"done"].join("_"),a),a.apiParams.is_multi_items&&"sek-refresh-level"===a.apiParams.action&&o.preview.send("multi-items-module-refreshed",a),l.isUndefined(t)||t.data&&t.data.setting_validities&&o.preview.send("selective-refresh-setting-validities",t.data.setting_validities)}).fail(function(){o.preview.send("sek-notify",{type:"error",duration:1e4,message:sekPreviewLocalized.i18n["Something went wrong, please refresh this page."]})}).always(function(e){d.cachedElements.$body.removeClass(i)}).then(function(){o.preview.trigger("control-panel-requested-action-done",{action:i,args:a})})}catch(e){d.errare("reactToPanelMsg => Error when firing the callback of "+i,e),d.cachedElements.$body.removeClass(i)}})})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,d){o.extend(SekPreviewPrototype,{ajaxAddSektion:function(n){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:n.apiParams.location}),s.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,in_column:n.apiParams.in_column,location_skope_id:n.location_skope_id,local_skope_id:n.local_skope_id,sek_action:n.apiParams.action,is_nested:n.apiParams.is_nested,content_type:n.all_params&&n.all_params.content_type?n.all_params.content_type:null,collection_of_preset_section_id:n.all_params&&n.all_params.collection_of_preset_section_id?n.all_params.collection_of_preset_section_id:[]}).done(function(e){var t,a="";if(e.data&&e.data.contents?a=e.data.contents:(s.errare("SekPreviewPrototype::ajaxAddSektion => ajax_response.data.contents is undefined ",e),s.errare("params ?",n)),n.apiParams.is_nested){(t=o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_column+'"]')).length<1&&s.errare("preview => reactToPanelMsg => sek-add-column => no DOM node for parent column => ",n.apiParams.in_column);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_column+'"></span>';t.before(i),t.remove(),o(".sektion-wrapper").find(".sek-placeholder").after(a),o(".sektion-wrapper").find(".sek-placeholder").remove()}else"sek-duplicate-section"!=n.apiParams.action||d.isEmpty(n.cloneId)?($beforeCandidate=o('.sektion-wrapper[data-sek-id="'+n.apiParams.location+'"]').find('div[data-sek-id="'+n.apiParams.before_section+'"]'),$afterCandidate=o('.sektion-wrapper[data-sek-id="'+n.apiParams.location+'"]').find('div[data-sek-id="'+n.apiParams.after_section+'"]'),!d.isEmpty(n.apiParams.before_section)&&0<$beforeCandidate.length?$beforeCandidate.before(a):!d.isEmpty(n.apiParams.after_section)&&0<$afterCandidate.length?$afterCandidate.after(a):o('[data-sek-id="'+n.apiParams.location+'"]').append(a)):o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]').after(a);"sek-duplicate-section"==n.apiParams.action&&o('div[data-sek-id="'+n.cloneId+'"]',".sektion-wrapper").each(function(){o(this).trigger("sek-columns-refreshed")}),n.apiParams.is_nested&&(s.makeModulesSortableInColumn(n.apiParams.in_column),o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]').each(function(){s.maybeMakeColumnResizableInSektion.call(this)})),n.cloneId&&o('div[data-sek-id="'+n.cloneId+'"]').trigger("sek-section-added",n),o('div[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-section-added",n),o('div[data-sek-id="'+n.apiParams.location+'"]').trigger("sek-location-refreshed",n)}).fail(function(e){s.errare("ERROR in sek_get_html_for_injection ? ",e),o('[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(o,d,e){d.extend(SekPreviewPrototype,{ajaxRefreshColumns:function(n){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:n.apiParams.in_sektion}),s.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,location_skope_id:n.location_skope_id,local_skope_id:n.local_skope_id,sek_action:n.apiParams.action}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(s.errare("SekPreviewPrototype::ajaxRefreshColumns => ajax_response.data.contents is undefined ",e),s.errare("params ?",n));var a=d('div[data-sek-id="'+n.apiParams.in_sektion+'"]');a.length<1&&s.errare("reactToPanelMsg => "+n.apiParams.action+" => no DOM node for parent sektion => ",n.apiParams.in_sektion);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_sektion+'"></span>';a.before(i),a.remove(),d(".sektion-wrapper").find(".sek-placeholder").after(t),d(".sektion-wrapper").find(".sek-placeholder").remove(),o.preview.trigger("sek-refresh-stylesheet",n),d('div[data-sek-id="'+n.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed",{in_sektion:n.apiParams.in_sektion})}).fail(function(e){s.errare("ERROR reactToPanelMsg => sek-add-column => ",e),d('[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-ajax-error")})},ajaxResizeColumns:function(a){var i=this;return i.mayBePrintLoader({loader_located_in_level_id:a.apiParams.in_sektion}),i.doAjax({action:"sek_get_content",resized_column:a.apiParams.resized_column,sister_column:a.apiParams.sister_column,location_skope_id:a.location_skope_id,local_skope_id:a.local_skope_id,sek_action:"sek-resize-columns"}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(i.errare("SekPreviewPrototype::ajaxResizeColumns => ajax_response.data.contents is undefined ",e),i.errare("params ?",a)),d('[data-sek-id="'+a.apiParams.resized_column+'"]').css({width:"",height:""}),i.appendDynStyleSheet(a.location_skope_id,t),d('div[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed")}).fail(function(e){i.errare("ERROR reactToPanelMsg => sek-resize-columns => ",e),d('[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,t){o.extend(SekPreviewPrototype,{ajaxRefreshModulesAndNestedSections:function(n){var s=this;return s.mayBePrintLoader({loader_located_in_level_id:n.apiParams.in_column}),s.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,in_column:n.apiParams.in_column,location_skope_id:n.location_skope_id,local_skope_id:n.local_skope_id,sek_action:n.apiParams.action,is_nested:n.apiParams.is_nested}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(s.errare("SekPreviewPrototype::ajaxRefreshModulesAndNestedSections => ajax_response.data.contents is undefined ",e),s.errare("params ?",n));var a=o('[data-sek-id="'+n.apiParams.in_column+'"]');a.length<1&&s.errare("reactToPanelMsg => ajaxRefreshModulesAndNestedSections => no DOM node for parent column => ",n.apiParams.in_column);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_column+'"></span>';a.before(i),a.remove(),o('[data-sek-placeholder-for="'+n.apiParams.in_column+'"]').after(t),o('[data-sek-placeholder-for="'+n.apiParams.in_column+'"]').remove(),o('[data-sek-id="'+n.apiParams.in_column+'"]').trigger("sek-modules-refreshed",{in_column:n.apiParams.in_column,in_sektion:n.apiParams.in_sektion})}).fail(function(e){s.errare("ERROR reactToPanelMsg => sek-add-module => ",e),o('[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,n,s){n.extend(SekPreviewPrototype,{ajaxRefreshStylesheet:function(a){var i=this;return i.mayBePrintLoader({loader_located_in_level_id:a.apiParams.id}),i.doAjax({action:"sek_get_content",location_skope_id:a.location_skope_id,local_skope_id:a.local_skope_id,sek_action:"sek-refresh-stylesheet"}).done(function(e){var t="";e.data&&e.data.contents&&(t=e.data.contents),i.appendDynStyleSheet(a.location_skope_id,t),n('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-stylesheet-refreshed",{level:a.apiParams.level,id:a.apiParams.id})}).fail(function(e){i.errare("sek-refresh-stylesheet fail !"),n('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-ajax-error")})},appendDynStyleSheet:function(e,t){var a="#sek-"+e,i="#sek-gfonts-local-and-global";0<n("head").find(a).length&&n("head").find(a).remove(),0<n("head").find(i).length&&n("head").find(i).remove(),s.isEmpty(t)||n("head").append(t),!s.isEmpty(t)&&n("head").find(a).length<1&&n("head").find(i).length<1?this.errare("sek-preview => problem when printing the dynamic inline style for : "+a,t):n("head").find(a).attr("sek-data-origin","customizer")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,d){o.extend(SekPreviewPrototype,{parseTemplate:d.memoize(function(t){var a,i=this,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){if(o(t).length<1)return i.errare("preview => parseTemplate => the requested tmpl does not exist =>"+t),"";try{a=a||d.template(o(t).html(),n)}catch(e){i.errare("preview => parseTemplate => problem when parsing tmpl =>"+t,e)}return a(e)}}),_prettyPrintLog:function(e){e=d.extend({bgCol:"#5ed1f5",textCol:"#000",consoleArguments:[]},e);var t,a=Array.from(e.consoleArguments);return a=d.isEmpty(d.filter(a,function(e){return!d.isString(e)}))?a.join(" "):JSON.stringify(a.join(" ")),["%c "+(t=a,d.isString(t)?300<t.length?t.substr(0,299)+"...":t:""),["background:"+e.bgCol,"color:"+e.textCol,"display: block;"].join(";")]},_wrapLogInsideTags:function(e,t,a){d.isUndefined(console)&&"function"!=typeof window.console.log||(sekPreviewLocalized.isDevMode?d.isUndefined(t)?console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})):(console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})),console.log(t),console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["</"+e+">"]}))):console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:[e]})))},errare:function(e,t){this._wrapLogInsideTags(e,t,"#ffd5a0")},infoLog:function(e,t){this._wrapLogInsideTags(e,t,"#5ed1f5")},doAjax:function(e){var t=this,a=(e=e||(d.isObject(e)?e:{})).ajaxUrl||sekPreviewLocalized.ajaxUrl,i=sekPreviewLocalized.frontNonce,n=o.Deferred(),s=d.extend({action:"",withNonce:!1},e);return"https:"==document.location.protocol&&(a=a.replace("http://","https://")),d.isEmpty(s.action)||!d.isString(s.action)?(t.errare("self.doAjax : unproper action provided"),n.resolve().promise()):(s[i.id]=i.handle,!d.isObject(i)||d.isUndefined(i.id)||d.isUndefined(i.handle)?(t.errare("self.doAjax : unproper nonce"),n.resolve().promise()):(s["preview-level-guid"]=sekPreviewLocalized.previewLevelGuid,s.czr_query_params=JSON.stringify(d.isObject(_wpCustomizeSettings.czr_query_params)?_wpCustomizeSettings.czr_query_params:[]),o.post(a,s).done(function(e){"0"!==e&&"-1"!==e&&!1!==e.success||(t.errare("self.doAjax : done ajax error for action : "+s.action,e),n.reject(e)),n.resolve(e)}).fail(function(e){t.errare("self.doAjax : failed ajax error for : "+s.action,e),n.reject(e)}),n.promise()))},isModuleRegistered:function(e){return sekPreviewLocalized.registeredModules&&!d.isUndefined(sekPreviewLocalized.registeredModules[e])},getRegisteredModuleProperty:function(e,t){return this.isModuleRegistered(e)?sekPreviewLocalized.registeredModules[e][t]:"not_set"},getLevelModel:function(t,e){var a=this,i="no_match";return d.isUndefined(e)&&a.errare("getLevelModel => a collection must be provided"),d.each(e,function(e){"no_match"==i&&(t===e.id?i=e:d.isArray(e.collection)&&(i=a.getLevelModel(t,e.collection)))}),i}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,t,a){t.extend(SekPreviewPrototype,e.Events);var i=e.Class.extend(SekPreviewPrototype);e.bind("preview-ready",function(){e.preview.bind("active",function(){try{e.sekPreview=new i}catch(e){SekPreviewPrototype.errare("SekPreviewConstructor => problem on instantiation",e)}})})}(wp.customize,jQuery,_);