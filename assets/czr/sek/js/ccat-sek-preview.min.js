var SekPreviewPrototype=SekPreviewPrototype||{};!function(e,t,a){t.extend(SekPreviewPrototype,{initialize:function(){var e=this;try{this.skope_id=a.findWhere(_wpCustomizeSettings.czr_new_skopes,{skope:"local"}).skope_id}catch(e){return void this.errare("Preview => error when storing the skope_id",e)}t(function(){e.setupSortable(),e.setupResizable(),e.setupUiHoverVisibility(),e.scheduleUiClickReactions(),e.schedulePanelMsgReactions()})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupSortable:function(){var a=this;return this.sortableDefaultParams={placeholder:"sortable-placeholder",over:function(e,t){}},c('[data-sek-level="location"]').each(function(){a.makeSektionsSortableInLocation(c(this).data("sek-id"))}),c("body").on("sek-section-added sek-refresh-level",'[data-sek-level="location"]',function(e,t){a.makeSektionsSortableInLocation(c(this).data("sek-id"))}),c('[data-sek-level="location"]').each(function(){c(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(c(this).data("sek-id"))})}),c('[data-sek-level="location"]').on("sek-columns-refreshed sek-section-added",'[data-sek-level="section"]',function(e){a.makeColumnsSortableInSektion(c(this).data("sek-id"))}),c('[data-sek-level="location"]').each(function(){c(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))})}),c('[data-sek-level="location"]').on("sek-modules-refreshed",'[data-sek-level="column"]',function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))}),c('[data-sek-level="location"]').on("sek-columns-refreshed",'[data-sek-level="section"]',function(){c(this).find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(c(this).data("sek-id"))})}),this},makeSektionsSortableInLocation:function(e){var a,n,t,i=this,o=[],s=[];c('[data-sek-id="'+e+'"]').each(function(){t=c.extend(!0,{},i.sortableDefaultParams),c(this).sortable(k.extend(t,{handle:".sek-move-section",connectWith:'[data-sek-level="location"]',start:function(e,t){$sourceLocation=t.item.closest('[data-sek-level="location"]'),a=$sourceLocation.data("sek-id"),$sourceLocation.children('[data-sek-level="section"]').each(function(){o.push(c(this).data("sek-id"))})},stop:function(e,t){s=[],$targetLocation=t.item.closest('[data-sek-level="location"]'),n=$targetLocation.data("sek-id"),$targetLocation.children('[data-sek-level="section"]').each(function(){s.push(c(this).data("sek-id"))}),l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"section",newOrder:s,from_location:a,to_location:n})}}))})},makeColumnsSortableInSektion:function(e){var a=this,t=c.extend(!0,{},a.sortableDefaultParams);c('[data-sek-id="'+e+'"]').find(".sek-sektion-inner").first().sortable(k.extend(t,{handle:".sek-move-column",connectWith:".sek-sektion-inner",remove:function(e,t){return $targetSektionCandidate=t.item.closest('[data-sek-level="section"]'),!(0<$targetSektionCandidate.length&&12<$targetSektionCandidate.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length)||(l.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["You've reached the maximum number of columns allowed in this section."]}),!1)},start:function(e,t){startOrder=[],newOrder=[],from_sektion=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){startOrder.push(c(this).data("sek-id"))}),k.isEmpty(startOrder)&&a.errare("column sortable => startOrder should not be empty")},stop:function(e,t){$targetSektion=t.item.closest('[data-sek-level="section"]'),to_sektion=$targetSektion.data("sek-id"),$targetSektion.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){newOrder.push(c(this).data("sek-id"))}),k.isEmpty(newOrder)?a.errare("column sortable =>  newOrder should not be empty"):k.isEqual(newOrder,startOrder)&&to_sektion===from_sektion?sekPreviewLocalized.isDevMode&&a.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"column",newOrder:newOrder,from_sektion:from_sektion,to_sektion:to_sektion})}}))},makeModulesSortableInColumn:function(e){var a,n,i,o,t,s=[],r=[],d=this;t=c.extend(!0,{},d.sortableDefaultParams),c('[data-sek-id="'+e+'"]').find(".sek-column-inner").first().sortable(k.extend(t,{handle:".sek-move-module",connectWith:".sek-column-inner",over:function(e,t){c('[data-sek-level="location"]').find(".sek-sortable-overing").each(function(){c(this).removeClass("sek-sortable-overing")}),c(e.target).addClass("sek-sortable-overing")},start:function(e,t){s=[],r=[],c("body").addClass("sek-dragging-element"),n=t.item.closest('[data-sek-level="column"]').data("sek-id"),a=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="column"]').find(".sek-column-inner").first().children('[data-sek-level="module"]').each(function(){s.push(c(this).data("sek-id"))}),k.isEmpty(s)&&d.errare("makeModulesSortableInColumn => startOrder should not be empty")},stop:function(e,t){o=t.item.closest('[data-sek-level="column"]'),i=o.data("sek-id"),o.find(".sek-column-inner").first().children("[data-sek-id]").each(function(){r.push(c(this).data("sek-id"))}),k.isEmpty(r)?d.errare("makeModulesSortableInColumn => newOrder should not be empty"):k.isEqual(r,s)&&i===n?d.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(l.preview.send("sek-move",{id:t.item.data("sek-id"),level:"module",newOrder:r,from_column:n,to_column:i,from_sektion:a,to_sektion:t.item.closest('[data-sek-level="section"]').data("sek-id")}),c("body").removeClass("sek-dragging-element"))}}))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupResizable:function(){var t=this;return c(".sektion-wrapper").find('div[data-sek-level="section"]').each(function(){t.maybeMakeColumnResizableInSektion.call(this)}),c(".sektion-wrapper").on("sek-modules-refreshed sek-columns-refreshed",'div[data-sek-level="section"]',function(e){t.maybeMakeColumnResizableInSektion.call(this)}),this},maybeMakeColumnResizableInSektion:function(){var a,n,i,o,s,r,d,e=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]');e.length<2||e.each(function(){c(this).resizable({resize:function(e,t){c(".sektion-wrapper").data("sek-resizing-columns",!0)},start:function(e,t){if(a=t.element.closest('div[data-sek-level="section"]'),a.data("sek-id"),n=a.find(".sek-sektion-inner")[0].getBoundingClientRect().width,!((s=a.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length)<2)){if((i=t.element.closest('div[data-sek-level="column"]')).length<1)throw new Error("ERROR => resizable => No valid level dom element found");d=i.index()+1==s,r=d?i.prev():i.next(),c(".sektion-wrapper").data("sek-resizing-columns",!0),k.delay(function(){c(".sektion-wrapper").data("sek-resizing-columns",!1)},3e3)}},stop:function(e,t){if(!(s<2)){if(i.length<1)throw new Error("ERROR => resizable => No valid level dom element found");i.css({width:"",height:""}),o=(parseFloat(t.size.width)/parseFloat(n)*100).toFixed(3),l.preview.send("sek-resize-columns",{action:"sek-resize-columns",level:i.data("sek-level"),in_sektion:a.data("sek-id"),id:i.data("sek-id"),resized_column:i.data("sek-id"),sister_column:r.data("sek-id"),resizedColumnWidthInPercent:o,col_number:s}),c(".sektion-wrapper").data("sek-resizing-columns",!1)}},helper:"ui-resizable-helper",handles:"e"});var e=c(this);k.delay(function(){e.find(".ui-resizable-handle").find(".fa-arrows-alt-h").length<1&&e.find(".ui-resizable-handle").append('<i class="fas fa-arrows-alt-h"></i>')},500)})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,d,l){d.extend(SekPreviewPrototype,{setupUiHoverVisibility:function(){var a,n,i,o,s=this,r=!1;d("body").on("mouseenter","[data-sek-level]",function(e){if("location"!=(n=d(this).data("sek-level"))&&!(0<(o=d(this)).children(".sek-dyn-ui-wrapper").length&&!1===r)){switch(i={id:o.data("sek-id"),level:o.data("sek-level")},n){case"section":i=l.extend(i,{is_last_possible_section:!0===d(this).data("sek-is-nested"),can_have_more_columns:d(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12});break;case"column":var t=d(this).closest('div[data-sek-level="section"]');i=l.extend(i,{parent_can_have_more_columns:t.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,parent_is_single_column:t.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<2,parent_is_last_allowed_nested:!0===t.data("sek-is-nested")});break;case"module":i=l.extend(i,{})}!0===d(".sektion-wrapper").data("sek-resizing-columns")&&l.contains(["column","module"],n)||(a=s.parseTemplate("#sek-dyn-ui-tmpl-"+n),d.when(d(this).prepend(a(i))).done(function(){o.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}}).on("mouseleave","[data-sek-level]",function(e){r=!0,(o=d(this)).children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){d(this).remove(),r=!1}})});return s.mouseMovedRecently=new e.Value({}),s.mouseMovedRecently.bind(function(e){l.isEmpty(e)?d("body").stop(!0,!0).find(".sek-add-content-button").each(function(){d(this).fadeOut({duration:200,complete:function(){d(this).remove()}})}):(d("body").find('div[data-sek-level="location"]').each(function(){$sectionCollection=d(this).children('div[data-sek-level="section"]'),a=s.parseTemplate("#sek-tmpl-add-content-button");var e,t=d(this).data("sek-id");$sectionCollection.each(function(){0<d(this).find(".sek-add-content-button").length||(d.when(d(this).prepend(a({location:t}))).done(function(){e=d(this).find(".sek-add-content-button"),d(this).data("sek-id")&&e.attr("data-sek-before-section",d(this).data("sek-id")),e.fadeIn(300)}),$sectionCollection.length==d(this).index()+1&&d.when(d(this).append(a({is_last:!0,location:t}))).done(function(){e=d(this).find(".sek-add-content-button").last(),d(this).data("sek-id")&&e.attr("data-sek-after-section",d(this).data("sek-id")),e.fadeIn(300)}))})}),d(".sek-empty-location-placeholder").each(function(){0<d(this).find(".sek-add-content-button").length||d.when(d(this).append(a({location:d(this).closest('div[data-sek-level="location"]').data("sek-id")}))).done(function(){$btn_el=d(this).find(".sek-add-content-button"),$btn_el.attr("data-sek-is-first-section",!0),$btn_el.fadeIn(300)})}))}),d(window).on("mousemove scroll",l.throttle(function(e){s.mouseMovedRecently({x:e.clientX,y:e.clientY}),clearTimeout(d.data(this,"_scroll_move_timer_")),d.data(this,"_scroll_move_timer_",setTimeout(function(){s.mouseMovedRecently.set({})},4e3))},50)),e.preview.bind("sek-drag-start",function(){s.mouseMovedRecently.set({})}),this}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(k,p,u){p.extend(SekPreviewPrototype,{scheduleUiClickReactions:function(){var c=this;p("body").on("click",function(e){var t,a=p(e.target),n=a.closest('[data-sek-level="location"]'),i=a.closest("[data-sek-level]"),o=a.closest("[data-sek-click-on]"),s=n.data("sek-id"),r=i.data("sek-level"),d=i.data("sek-id");switch("add-content"==a.data("sek-click-on")||0<a.closest("[data-sek-click-on]").length&&"add-content"==a.closest("[data-sek-click-on]").data("sek-click-on")?"addContentButton":!u.isEmpty(a.data("sek-click-on"))||0<o.length?"UIIcon":"module"==i.data("sek-level")?"moduleWrapper":"column"==i.data("sek-level")&&!0===i.data("sek-no-modules")?"noModulesColumn":"column"==i.data("sek-level")?"columnOutsideModules":"section"==i.data("sek-level")?"sectionOutsideColumns":u.isEmpty(a.data("sek-add"))?a.hasClass("sek-to-json")?"sekToJson":"inactiveZone":"addSektion"){case"addContentButton":var l=!0===a.closest("[data-sek-is-first-section]").data("sek-is-first-section");k.preview.send("sek-add-section",{location:s,level:"section",before_section:a.closest("[data-sek-before-section]").data("sek-before-section"),after_section:a.closest("[data-sek-after-section]").data("sek-after-section"),is_first_section:l,send_to_preview:!l});break;case"UIIcon":if(i.length<1)throw new Error("ERROR => sek-front-preview => No valid level dom element found");if(t=a.closest("[data-sek-click-on]").data("sek-click-on"),u.isEmpty(t))throw new Error("Invalid action");if(u.isEmpty(r)||u.isEmpty(d))throw new Error("ERROR => sek-front-preview => No valid level id found");c._send_(a,{action:t,location:s,level:r,id:d});break;case"moduleWrapper":if(0<a.parent(".sek-dyn-ui-icons").length)return;c._send_(a,{action:"edit-module",level:r,id:d});break;case"noModulesColumn":if(0<a.parent(".sek-dyn-ui-icons").length)return;c._send_(a,{action:"pick-module",level:r,id:d});break;case"columnOutsideModules":case"sectionOutsideColumns":c._send_(a,{action:"edit-options",location:s,level:r,id:d});break;case"addSektion":k.preview.send("sek-add-section",{location:s,level:a.data("sek-add")});break;case"sekToJson":k.preview.send("sek-to-json",{id:d});break;case"inactiveZone":k.preview.send("sek-click-on-inactive-zone"),c._send_(a,{action:"pick-module"})}})},_send_:function(e,t){k.preview.send("sek-"+t.action,{location:t.location,level:t.level,id:t.id,in_column:0<e.closest('div[data-sek-level="column"]').length?e.closest('div[data-sek-level="column"]').data("sek-id"):"",in_sektion:0<e.closest('div[data-sek-level="section"]').length?e.closest('div[data-sek-level="section"]').data("sek-id"):"",clicked_input_type:0<e.closest("div[data-sek-input-type]").length?e.closest("div[data-sek-input-type]").data("sek-input-type"):"",clicked_input_id:0<e.closest("div[data-sek-input-id]").length?e.closest("div[data-sek-input-id]").data("sek-input-id"):""})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(s,r,d){r.extend(SekPreviewPrototype,{schedulePanelMsgReactions:function(){var o=this,e={"sek-add-section":"ajaxAddSektion","sek-add-content-in-new-sektion":"ajaxAddSektion","sek-add-column":"ajaxRefreshColumns","sek-add-module":"ajaxRefreshModulesAndNestedSections","sek-remove":function(e){var t=e.apiParams.id,a=r('div[data-sek-id="'+t+'"]');switch(e.apiParams.action){case"sek-remove-section":!0===e.apiParams.is_nested?o.ajaxRefreshModulesAndNestedSections(e):((d.isEmpty(t)||a.length<1)&&o.errare("reactToPanelMsg => sek-remove => invalid candidate id => ",t),r(".sektion-wrapper").find(a).remove());break;case"sek-remove-column":o.ajaxRefreshColumns(e);break;case"sek-remove-module":o.ajaxRefreshModulesAndNestedSections(e)}},"sek-duplicate":function(e){var t;switch(e.apiParams.action){case"sek-duplicate-section":e.apiParams.id=e.cloneId,t=o.ajaxAddSektion(e);break;case"sek-duplicate-column":e.apiParams.id=e.cloneId,t=o.ajaxRefreshColumns(e);break;case"sek-duplicate-module":e.apiParams.id=e.cloneId,t=o.ajaxRefreshModulesAndNestedSections(e)}return t},"sek-refresh-level":function(i){o.doAjax({skope_id:i.skope_id,action:"sek_get_content",id:i.apiParams.id,level:i.apiParams.level,sek_action:i.apiParams.action}).fail(function(e){o.errare("ERROR reactToPanelMsg => sek-refresh-level => ",e)}).done(function(e){var t='<span class="sek-placeholder" data-sek-placeholder-for="'+i.apiParams.id+'"></span>',a=r('div[data-sek-id="'+i.apiParams.id+'"]');if(a.length<1)o.errare("reactToPanelMsg => sek-refresh-level ajax done => the level to refresh is not rendered in the page",e);else{a.before(t);var n=r('[data-sek-placeholder-for="'+i.apiParams.id+'"]');a.remove(),n.after(e.data),n.remove(),r(".sektion-wrapper").find('div[data-sek-id="'+i.apiParams.id+'"]').trigger("sek-refresh-level",{level:i.apiParams.level,id:i.apiParams.id})}})},"sek-refresh-stylesheet":"ajaxRefreshStylesheet","sek-move":function(e){switch(e.apiParams.action){case"sek-move-module":var t=r.extend(!0,{},e),a=r.extend(!0,{},e);t.apiParams.from_column!=t.apiParams.to_column&&(t.apiParams=d.extend(t.apiParams,{in_column:t.apiParams.from_column,in_sektion:t.apiParams.from_sektion,action:"sek-refresh-modules-in-column"}),o.ajaxRefreshModulesAndNestedSections(t)),e.apiParams=d.extend(a.apiParams,{in_column:a.apiParams.to_column,in_sektion:a.apiParams.to_sektion,action:"sek-refresh-modules-in-column"}),o.ajaxRefreshModulesAndNestedSections(a),r('[data-sek-id="'+e.apiParams.to_column+'"]',".sektion-wrapper").find(".sek-column-inner").sortable("refresh");break;case"sek-move-column":if(e.apiParams.from_sektion!=e.apiParams.to_sektion){var n=r.extend(!0,{},e),i=r.extend(!0,{},e);r('[data-sek-id="'+e.apiParams.from_sektion+'"]',".sektion-wrapper").find('div[data-sek-level="column"]').length<1?s.preview.send("sek-add-column",{in_sektion:e.apiParams.from_sektion,autofocus:!1}):(n.apiParams=d.extend(n.apiParams,{in_sektion:e.apiParams.from_sektion,action:"sek-refresh-columns-in-sektion"}),o.ajaxRefreshColumns(n)),i.apiParams=d.extend(i.apiParams,{in_sektion:e.apiParams.to_sektion,action:"sek-refresh-columns-in-sektion"}),o.ajaxRefreshColumns(i)}}},"sek-resize-columns":"ajaxResizeColumns","sek-generate-level-options-ui":function(e){},"sek-generate-module-ui":function(e){},"sek-drag-start":function(e){var t=1;r(".sektion-wrapper").children('[data-sek-level="section"]').each(function(){r('[data-drop-zone-before-section="'+r(this).data("sek-id")+'"]').length<1&&r(this).before('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-before-section="'+r(this).data("sek-id")+'"></div>'),t==r(".sektion-wrapper").children('[data-sek-level="section"]').length&&r(this).after('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-after-section="'+r(this).data("sek-id")+'"></div>'),t++}),r(".sek-empty-location-placeholder").each(function(){r.when(r(this).append('<div class="sek-content-'+e.type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="in-empty-location"></div>'))}),"module"==e.type&&r('[data-sek-level="column"]').each(function(){var e=r(this).find('[data-sek-level="module"]'),t=1;e.each(function(){r('[data-drop-zone-before-module="'+r(this).data("sek-id")+'"]').length<1&&r(this).before('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules" data-drop-zone-before-module="'+r(this).data("sek-id")+'"></div>'),t==e.length&&r('[data-drop-zone-after-module="'+r(this).data("sek-id")+'"]').length<1&&r(this).after('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules" data-drop-zone-after-module="'+r(this).data("sek-id")+'"></div>'),t++})}),r("body").addClass("sek-dragging"),d.delay(function(){r(".sek-dynamic-drop-zone").css({opacity:1})},100)},"sek-drag-stop":function(e){r("body").removeClass("sek-dragging"),r(".sortable-placeholder").remove(),r(".sek-dynamic-drop-zone").remove()},"sek-focus-on":function(e){0<r('div[data-sek-id="'+e.id+'"]').length&&r("html, body").animate({scrollTop:r('div[data-sek-id="'+e.id+'"]').offset().top-100},"slow")}};d.each(e,function(t,a){s.preview.bind(a,function(e){if(e=d.extend({skope_id:"",apiParams:{},uiParams:{}},e||{}),d.isFunction(t))try{r.when(t(e)).done(function(){s.preview.send([a,"done"].join("_"),e)}).fail(function(){s.preview.send("sek-notify",{type:"error",duration:1e4,message:sekPreviewLocalized.i18n["Something went wrong, please refresh this page."]})})}catch(e){o.errare("reactToPanelMsg => Error when firing the callback of "+a,e)}else try{r.when(o[t].call(o,e)).done(function(){s.preview.send([a,"done"].join("_"),e)}).fail(function(){s.preview.send("sek-notify",{type:"error",duration:1e4,message:sekPreviewLocalized.i18n["Something went wrong, please refresh this page."]})})}catch(e){o.errare("reactToPanelMsg => Error when firing the callback of "+a,e)}})})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,s){o.extend(SekPreviewPrototype,{ajaxAddSektion:function(n){var i=this;return i.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,in_column:n.apiParams.in_column,skope_id:n.skope_id,sek_action:n.apiParams.action,is_nested:n.apiParams.is_nested}).done(function(e){var t;if(n.apiParams.is_nested){(t=o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_column+'"]')).length<1&&i.errare("preview => reactToPanelMsg => sek-add-column => no DOM node for parent column => ",n.apiParams.in_column);var a='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_column+'"></span>';t.before(a),t.remove(),o(".sektion-wrapper").find(".sek-placeholder").after(e.data),o(".sektion-wrapper").find(".sek-placeholder").remove()}else"sek-duplicate-section"!=n.apiParams.action||s.isEmpty(n.cloneId)?($beforeCandidate=o('.sektion-wrapper[data-sek-id="'+n.apiParams.location+'"]').find('div[data-sek-id="'+n.apiParams.before_section+'"]'),$afterCandidate=o('.sektion-wrapper[data-sek-id="'+n.apiParams.location+'"]').find('div[data-sek-id="'+n.apiParams.after_section+'"]'),!s.isEmpty(n.apiParams.before_section)&&0<$beforeCandidate.length?$beforeCandidate.before(e.data):!s.isEmpty(n.apiParams.after_section)&&0<$afterCandidate.length?$afterCandidate.after(e.data):o('[data-sek-id="'+n.apiParams.location+'"]').append(e.data)):o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]').after(e.data);"sek-duplicate-section"==n.apiParams.action&&o('div[data-sek-id="'+n.cloneId+'"]',".sektion-wrapper").each(function(){o(this).trigger("sek-columns-refreshed")}),n.apiParams.is_nested&&(i.makeModulesSortableInColumn(n.apiParams.in_column),o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]').each(function(){i.maybeMakeColumnResizableInSektion.call(this)})),n.cloneId&&o('div[data-sek-id="'+n.cloneId+'"]').trigger("sek-section-added",n),o('div[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-section-added",n)}).fail(function(e){i.errare("ERROR in sek_get_html_for_injection ? ",e)})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,t){o.extend(SekPreviewPrototype,{ajaxRefreshColumns:function(n){var i=this;return i.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,skope_id:n.skope_id,sek_action:n.apiParams.action}).done(function(e){var t=o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]');t.length<1&&i.errare("reactToPanelMsg => "+n.apiParams.action+" => no DOM node for parent sektion => ",n.apiParams.in_sektion);var a='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_sektion+'"></span>';t.before(a),t.remove(),o(".sektion-wrapper").find(".sek-placeholder").after(e.data),o(".sektion-wrapper").find(".sek-placeholder").remove(),i.doAjax({action:"sek_get_content",skope_id:n.skope_id,sek_action:"sek-refresh-stylesheet"}).done(function(e){i.appendDynStyleSheet(n.skope_id,e.data)}).fail(function(e){console.log("sek-refresh-stylesheet fail !")}),o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed")}).fail(function(e){i.errare("ERROR reactToPanelMsg => sek-add-column => ",e)})},ajaxResizeColumns:function(t){var a=this;return a.doAjax({action:"sek_get_content",resized_column:t.apiParams.resized_column,sister_column:t.apiParams.sister_column,skope_id:t.skope_id,sek_action:"sek-resize-columns"}).done(function(e){o(".sektion-wrapper").find('div[data-sek-id="'+t.apiParams.resized_column+'"]').css({width:"",height:""}),a.appendDynStyleSheet(t.skope_id,e.data)}).fail(function(e){a.errare("ERROR reactToPanelMsg => sek-resize-columns => ",e)})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,t){o.extend(SekPreviewPrototype,{ajaxRefreshModulesAndNestedSections:function(n){var i=this;return i.doAjax({action:"sek_get_content",id:n.apiParams.id,in_sektion:n.apiParams.in_sektion,in_column:n.apiParams.in_column,skope_id:n.skope_id,sek_action:n.apiParams.action,is_nested:n.apiParams.is_nested}).done(function(e){var t=o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_column+'"]');t.length<1&&i.errare("reactToPanelMsg => ajaxRefreshModulesAndNestedSections => no DOM node for parent column => ",n.apiParams.in_column);var a='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.in_column+'"></span>';t.before(a),t.remove(),o(".sektion-wrapper").find('[data-sek-placeholder-for="'+n.apiParams.in_column+'"]').after(e.data),o(".sektion-wrapper").find('[data-sek-placeholder-for="'+n.apiParams.in_column+'"]').remove(),o(".sektion-wrapper").find('div[data-sek-id="'+n.apiParams.in_column+'"]').trigger("sek-modules-refreshed")}).fail(function(e){i.errare("ERROR reactToPanelMsg => sek-add-module => ",e)})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,i,o){i.extend(SekPreviewPrototype,{ajaxRefreshStylesheet:function(t){var a=this;return a.doAjax({action:"sek_get_content",skope_id:t.skope_id,sek_action:"sek-refresh-stylesheet"}).done(function(e){a.appendDynStyleSheet(t.skope_id,e.data)}).fail(function(e){a.errare("sek-refresh-stylesheet fail !")})},appendDynStyleSheet:function(e,t){var a="#sek-"+e,n="#sek-gfonts-"+e;0<i("head").find(a).length&&i("head").find(a).remove(),0<i("head").find(n).length&&i("head").find(n).remove(),i("head").append(t),!o.isEmpty(t)&&i("head").find(a).length<1?this.errare("sek-preview => problem when printing the dynamic inline style for : "+a):i("head").find(a).attr("sek-data-origin","customizer")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,s,r){s.extend(SekPreviewPrototype,{parseTemplate:r.memoize(function(t){var a,n=this,i={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){if(s(t).length<1)return n.errare("preview => parseTemplate => the requested tmpl does not exist =>"+t),"";try{a=a||r.template(s(t).html(),i)}catch(e){n.errare("preview => parseTemplate => problem when parsing tmpl =>"+t,e)}return a(e)}}),_prettyPrintLog:function(e){e=r.extend({bgCol:"#5ed1f5",textCol:"#000",consoleArguments:[]},e);var t,a=Array.from(e.consoleArguments);return a=r.isEmpty(r.filter(a,function(e){return!r.isString(e)}))?a.join(" "):JSON.stringify(a.join(" ")),["%c "+(t=a,r.isString(t)?300<t.length?t.substr(0,299)+"...":t:""),["background:"+e.bgCol,"color:"+e.textCol,"display: block;"].join(";")]},_wrapLogInsideTags:function(e,t,a){r.isUndefined(console)&&"function"!=typeof window.console.log||(sekPreviewLocalized.isDevMode?r.isUndefined(t)?console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})):(console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})),console.log(t),console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["</"+e+">"]}))):console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:[e]})))},errare:function(e,t){this._wrapLogInsideTags(e,t,"#ffd5a0")},infoLog:function(e,t){this._wrapLogInsideTags(e,t,"#5ed1f5")},doAjax:function(e){var t=this,a=(e=e||(r.isObject(e)?e:{})).ajaxUrl||sekPreviewLocalized.ajaxUrl,n=sekPreviewLocalized.frontNonce,i=s.Deferred(),o=r.extend({action:"",withNonce:!1},e);return"https:"==document.location.protocol&&(a=a.replace("http://","https://")),r.isEmpty(o.action)||!r.isString(o.action)?(t.errare("self.doAjax : unproper action provided"),i.resolve().promise()):(o[n.id]=n.handle,!r.isObject(n)||r.isUndefined(n.id)||r.isUndefined(n.handle)?(t.errare("self.doAjax : unproper nonce"),i.resolve().promise()):(s.post(a,o).done(function(e){"0"!==e&&"-1"!==e&&!1!==e.success||(t.errare("self.doAjax : done ajax error for action : "+o.action,e),i.reject(e)),i.resolve(e)}).fail(function(e){t.errare("self.doAjax : failed ajax error for : "+o.action,e),i.reject(e)}),i.promise()))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,t,a){t.extend(SekPreviewPrototype,e.Events);var n=e.Class.extend(SekPreviewPrototype);e.bind("preview-ready",function(){e.preview.bind("active",function(){try{e.sekPreview=new n}catch(e){SekPreviewPrototype.errare("SekPreviewConstructor => problem on instantiation",e)}})})}(wp.customize,jQuery,_);