var SekPreviewPrototype=SekPreviewPrototype||{};!function(a,n,i){n.extend(SekPreviewPrototype,{cachedElements:{$body:n("body"),$window:n(window)},initialize:function(){var t=this;try{this.skope_id=i.findWhere(_wpCustomizeSettings.czr_new_skopes,{skope:"local"}).skope_id}catch(e){return void this.errare("Preview => error when storing the skope_id",e)}this.scheduleHighlightActiveLevel(),t.setupLoader(),n(function(){t.setupSortable(),t.setupResizable(),t.setupUiHoverVisibility(),t.scheduleUiClickReactions(),t.schedulePanelMsgReactions()}),t.cachedElements.$body.on("sek-columns-refreshed sek-modules-refreshed",function(e,t){if(!i.isUndefined(t)&&!i.isUndefined(t.in_sektion)&&0<n('[data-sek-id="'+t.in_sektion+'"]').length){var a=n('[data-sek-id="'+t.in_sektion+'"]');a.toggleClass("sek-has-modules",0<a.find('[data-sek-level="module"]').length)}}),t.deactivateLinks(),t.cachedElements.$body.on(["sek-modules-refreshed","sek-columns-refreshed","sek-section-added","sek-level-refreshed","sek-edit-module"].join(" "),function(e){t.deactivateLinks(e)});var e=function(){var e=[],t=[];n('[data-sek-level="location"]').each(function(){e.push(n(this).data("sek-id")),t.push({id:n(this).data("sek-id"),is_global:!0===n(this).data("sek-is-global-location"),is_header_footer:!0===n(this).data("sek-is-header-location")||!0===n(this).data("sek-is-footer-location"),is_header:!0===n(this).data("sek-is-header-location"),is_footer:!0===n(this).data("sek-is-footer-location")})}),a.preview.send("sek-active-locations-in-preview",{active_locations:e,active_locs_info:t})};a.preview.bind("sek-request-active-locations",e),e()},deactivateLinks:function(e){e=e||{};this.cachedElements.$body.find('[data-sek-level="module"]').each(function(){n(this).find("a").each(function(){try{(function(){if("yes"!==n(this).data("sek-unlinked")){var e=i.isString(n(this)[0].protocol)&&-1!==n(this)[0].protocol.indexOf("javascript");!e&&a.isLinkPreviewable(n(this)[0])?(n(this).addClass("nimble-shift-clickable"),n(this).data("sek-unlinked","yes").attr("data-nimble-href",n(this).attr("href")).attr("href","javascript:void(0)"),n(this).removeAttr("target"),n(this).on("mouseenter",function(){n(this).attr("title",sekPreviewLocalized.i18n["Shift-click to visit the link"])}),n(this).on("mouseleave",function(){n(this).removeAttr("title")}),n(this).on("click",function(e){e.shiftKey&&(e.preventDefault(),window.location.href=n(this).attr("data-nimble-href"))})):(n(this).addClass("nimble-unclickable"),n(this).data("sek-unlinked","yes").attr("data-nimble-href",n(this).attr("href")).attr("href","javascript:void(0)"),n(this).on("mouseenter",function(){n(this).attr("title",e?sekPreviewLocalized.i18n["Link deactivated while previewing"]:sekPreviewLocalized.i18n["External links are disabled when customizing"])}).on("mouseleave",function(){n(this).removeAttr("title")}),n(this).on("click",function(e){e.preventDefault()}))}}).call(n(this))}catch(e){a.errare("::deactivateLinks => error ",e)}})})},scheduleHighlightActiveLevel:function(){var s=this;this.activeLevelUI=new a.Value(""),this.activeLevelEl=new a.Value(null),this.activeUIChangedRecently=new a.Value(!1),this.activeLevelUI.bind(function(e,t){var a=n('[data-sek-id="'+e+'"]'),i=n('[data-sek-id="'+t+'"]');0<a.length&&(a.addClass("sek-active-ui sek-highlight-active-ui"),s.activeLevelEl(a)),0<i.length&&i.removeClass("sek-active-ui sek-highlight-active-ui"),s.activeUIChangedRecently(Date.now())}),s.activeLevelEl.bind(function(e){if(i.isObject(e)&&0<e.length&&!nb_.isInScreen(e[0]))try{e[0].scrollIntoView()}catch(e){s.errare("activeLevelEl error",e)}}),i.each(["sek-refresh-stylesheet","sek-refresh-level"],function(e){a.preview.bind(e,function(e){s.activeUIChangedRecently(Date.now())})}),this.activeUIChangedRecently.bind(function(e){var t=n('[data-sek-id="'+s.activeLevelUI()+'"]');n(".sek-highlight-active-ui").length&&n(".sek-highlight-active-ui").removeClass("sek-highlight-active-ui"),0<t.length&&t.toggleClass("sek-highlight-active-ui",!1!==e),clearTimeout(n.data(this,"_ui_change_timer_")),n.data(this,"_ui_change_timer_",setTimeout(function(){s.activeUIChangedRecently(!1)},3e3))})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(m,p,h){p.extend(SekPreviewPrototype,{setupSortable:function(){var a=this;return this.sortableDefaultParams={placeholder:"sortable-placeholder",over:function(e,t){},cursorAt:{top:0,left:0},tolerance:"pointer"},p('[data-sek-level="location"]').each(function(){a.makeSektionsSortableInLocation(p(this).data("sek-id"))}),a.cachedElements.$body.on("sek-section-added sek-level-refreshed sek-location-refreshed",'[data-sek-level="location"]',function(e,t){a.makeSektionsSortableInLocation(p(this).data("sek-id"))}),p('[data-sek-level="location"]').each(function(){p(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(p(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-columns-refreshed sek-section-added",'[data-sek-level="section"]',function(e){a.makeColumnsSortableInSektion(p(this).data("sek-id"))}),a.cachedElements.$body.on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){p(this).find('[data-sek-level="section"]').each(function(){a.makeColumnsSortableInSektion(p(this).data("sek-id"))})}),p('[data-sek-level="location"]').each(function(){p(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-modules-refreshed",'[data-sek-level="column"]',function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))}),a.cachedElements.$body.on("sek-columns-refreshed",'[data-sek-level="section"]',function(){p(this).find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-level-refreshed",'[data-sek-level="location"]',function(e,t){p(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-section-added",'[data-sek-level="location"]',function(e,t){p(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))})}),a.cachedElements.$body.on("sek-location-refreshed",'[data-sek-level="location"]',function(e,t){p(this).find('[data-sek-level="column"]').each(function(){a.makeModulesSortableInColumn(p(this).data("sek-id"))})}),this},printAllLevelsUi:function(){var e=this;e.cachedElements.$body.find("[data-sek-level]").each(function(){e.printLevelUI(p(this)),p(this).find(".sek-dyn-ui-wrapper").stop(!0,!0).show()})},makeSektionsSortableInLocation:function(e){var a,i,t,s=this,n=[];!0!==p('[data-sek-id="'+e+'"]').data("sek-is-global-location")&&(t=p.extend(!0,{},s.sortableDefaultParams),p('[data-sek-id="'+e+'"]').sortable(h.extend(t,{items:'[data-sek-level="section"]',handle:".sek-move-section",connectWith:'[data-sek-is-global-location="false"]',placeholder:{element:function(e){return p('<div class="sortable-placeholder"><div class="sek-module-placeholder-content"><p>'+sekPreviewLocalized.i18n["Insert here"]+"</p></div></div>")[0]},update:function(e,t){}},start:function(e,t){s.cachedElements.$body.addClass("sek-moving-section"),s.isDraggingElement=!0,$sourceLocation=t.item.closest('[data-sek-level="location"]'),a=$sourceLocation.data("sek-id"),s.printAllLevelsUi()},stop:function(e,t){s.cachedElements.$body.removeClass("sek-moving-section"),s.isDraggingElement=!1,n=[],$targetLocation=t.item.closest('[data-sek-level="location"]'),i=$targetLocation.data("sek-id"),$targetLocation.children('[data-sek-level="section"]').each(function(){n.push(p(this).data("sek-id"))}),m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"section",newOrder:n,from_location:a,to_location:i})},over:function(e,t){t.placeholder.addClass("sek-sortable-section-over")},out:function(e,t){t.placeholder.removeClass("sek-sortable-section-over")}})))},makeColumnsSortableInSektion:function(e){var a,i,s,n,o=this,t=p.extend(!0,{},o.sortableDefaultParams),r=[],d=[],l=p('[data-sek-id="'+e+'"]').find(".sek-sektion-inner").first(),c=function(e){if(e=p.extend({forTarget:!0},e||{}),!h.isEmpty(p(this).data("_sortable_columns_css_classes_")))return p(this).data("_sortable_columns_css_classes_");var t,a=p(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length,i=Math.floor(100/a);t=!0===e.forTarget?12<a+1?12:a+1:a-1<1?1:a-1;var s={current:"sek-col-"+i,next:"sek-col-"+Math.floor(100/t)};return p(this).data("_sortable_columns_css_classes_",s),s};l.sortable(h.extend(t,{handle:".sek-move-column",connectWith:".sek-sektion-inner",over:function(e,t){var a,i=p(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==p(this).data("sek-is-sender")?(a=c.call(p(this)),h.isEmpty(a)||i.each(function(){p(this).removeClass(a.current).addClass(a.next)})):(a=c.call(p(this),{forTarget:!1}),h.isEmpty(a)||i.each(function(){p(this).addClass(a.current).removeClass(a.next)}))},out:function(e,t){var a,i=p(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==p(this).data("sek-is-sender")?(a=c.call(p(this)),h.isEmpty(a)||i.each(function(){p(this).addClass(a.current).removeClass(a.next)})):(a=c.call(p(this),{forTarget:!1}),h.isEmpty(a)||i.each(function(){p(this).removeClass(a.current).addClass(a.next)}))},remove:function(e,t){s=t.item.closest('[data-sek-level="location"]'),to_location=s.data("sek-id"),n=!0===s.data("sek-is-global-location");var a=to_location!=from_location;return i!==n||!0===i&&!0===n&&a?(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["Moving elements between global and local sections is not allowed."]}),!1):($targetSektionCandidate=t.item.closest('[data-sek-level="section"]'),!(0<$targetSektionCandidate.length&&12<$targetSektionCandidate.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').length)||(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["You've reached the maximum number of columns allowed in this section."]}),!1))},start:function(e,t){a=t.item.closest('[data-sek-level="location"]'),from_location=a.data("sek-id"),i=!0===a.data("sek-is-global-location"),r=[],d=[],from_sektion=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){r.push(p(this).data("sek-id"))}),p(this).data("sek-is-sender",!0),h.isEmpty(r)?o.errare("column sortable => startOrder should not be empty"):o.printAllLevelsUi()},stop:function(e,t){$targetSektion=t.item.closest('[data-sek-level="section"]'),to_sektion=$targetSektion.data("sek-id"),$targetSektion.find(".sek-sektion-inner").first().children('[data-sek-level="column"]').each(function(){d.push(p(this).data("sek-id"))});var a,i=p(this).closest('[data-sek-level="section"]').find(".sek-sektion-inner").first().children('[data-sek-level="column"]');!0!==p(this).data("sek-is-sender")?(a=c.call(p(this)),h.isEmpty(a)||i.each(function(){p(this).removeClass(a.current).addClass(a.next)})):(a=c.call(p(this),{forTarget:!1}),h.isEmpty(a)||i.each(function(){p(this).addClass(a.current).removeClass(a.next)})),p('[data-sek-level="section"]').find(".sek-sektion-inner").each(function(){p(this).data("sek-is-sender",null).data("_sortable_columns_css_classes_",null)}),h.isEmpty(d)?o.errare("column sortable =>  newOrder should not be empty"):h.isEqual(d,r)&&to_sektion===from_sektion?sekPreviewLocalized.isDevMode&&o.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"column",newOrder:d,from_sektion:from_sektion,to_sektion:to_sektion}),p('div[data-sek-id="'+from_sektion+'"]').trigger("sek-level-refreshed"),from_sektion!==to_sektion&&p('div[data-sek-id="'+to_sektion+'"]').trigger("sek-level-refreshed"))}}))},makeModulesSortableInColumn:function(e){var a,i,s,n,t,o,r,d,l,c=[],k=[],u=this;t=p.extend(!0,{},u.sortableDefaultParams),p('[data-sek-id="'+e+'"]').find(".sek-column-inner").first().sortable(h.extend(t,{handle:".sek-move-module",connectWith:".sek-column-inner",over:function(e,t){p('[data-sek-level="location"]').find(".sek-sortable-overing").each(function(){p(this).removeClass("sek-sortable-overing")}),p(e.target).addClass("sek-sortable-overing")},remove:function(e,t){d=t.item.closest('[data-sek-level="location"]'),to_location=d.data("sek-id"),l=!0===d.data("sek-is-global-location");var a=to_location!=from_location;return!(r!==l||!0===r&&!0===l&&a)||(m.preview.send("sek-notify",{message:sekPreviewLocalized.i18n["Moving elements between global and local sections is not allowed."]}),!1)},start:function(e,t){o=t.item.closest('[data-sek-level="location"]'),from_location=o.data("sek-id"),r=!0===o.data("sek-is-global-location"),c=[],k=[],u.cachedElements.$body.addClass("sek-dragging-element"),i=t.item.closest('[data-sek-level="column"]').data("sek-id"),a=t.item.closest('[data-sek-level="section"]').data("sek-id"),t.item.closest('[data-sek-level="column"]').find(".sek-column-inner").first().children('[data-sek-level="module"]').each(function(){c.push(p(this).data("sek-id"))}),h.isEmpty(c)?u.errare("makeModulesSortableInColumn => startOrder should not be empty"):u.printAllLevelsUi()},stop:function(e,t){n=t.item.closest('[data-sek-level="column"]'),s=n.data("sek-id"),n.find(".sek-column-inner").first().children("[data-sek-id]").each(function(){k.push(p(this).data("sek-id"))}),h.isEmpty(k)?u.errare("makeModulesSortableInColumn => newOrder should not be empty"):h.isEqual(k,c)&&s===i?u.errare("preview => makeModulesSortableInColumn => start and stop positions are identical"):(m.preview.send("sek-move",{id:t.item.data("sek-id"),level:"module",newOrder:k,from_column:i,to_column:s,from_sektion:a,to_sektion:t.item.closest('[data-sek-level="section"]').data("sek-id")}),u.cachedElements.$body.removeClass("sek-dragging-element"))}})),p('[data-sek-id="'+e+'"]').addClass("sek-module-sortable-setup")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(l,c,k){c.extend(SekPreviewPrototype,{setupResizable:function(){var t=this;return c(".sektion-wrapper").find('div[data-sek-level="section"]').each(function(){t.maybeMakeColumnResizableInSektion.call(this)}),t.cachedElements.$body.on("sek-level-refreshed sek-modules-refreshed sek-columns-refreshed sek-section-added sek-location-refreshed",'[data-sek-level="location"]',function(e){c(this).find('[data-sek-level="section"]').each(function(){t.maybeMakeColumnResizableInSektion.call(this)})}),this},maybeMakeColumnResizableInSektion:function(){var a,i,s,n,o,r,d,e=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]');if(!(e.length<2)){var t=c(this).find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').last();e.not(t).each(function(){c(this).resizable({resize:function(e,t){c(".sektion-wrapper").data("sek-resizing-columns",!0)},start:function(e,t){if(a=t.element.closest('div[data-sek-level="section"]'),a.data("sek-id"),i=a.find(".sek-sektion-inner")[0].getBoundingClientRect().width,!((o=a.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length)<2)){if((s=t.element.closest('div[data-sek-level="column"]')).length<1)throw new Error("ERROR => resizable => No valid level dom element found");d=s.index()+1==o,r=d?s.prev():s.next(),c(".sektion-wrapper").data("sek-resizing-columns",!0),k.delay(function(){c(".sektion-wrapper").data("sek-resizing-columns",!1)},3e3)}},stop:function(e,t){if(!(o<2)){if(s.length<1)throw new Error("ERROR => resizable => No valid level dom element found");s.css({width:"",height:""}),n=(parseFloat(t.size.width)/parseFloat(i)*100).toFixed(3),l.preview.send("sek-resize-columns",{action:"sek-resize-columns",level:s.data("sek-level"),in_sektion:a.data("sek-id"),id:s.data("sek-id"),resized_column:s.data("sek-id"),sister_column:r.data("sek-id"),resizedColumnWidthInPercent:n,col_number:o}),c(".sektion-wrapper").data("sek-resizing-columns",!1)}},helper:"ui-resizable-helper",handles:"e"});var e=c(this);k.delay(function(){e.find(".ui-resizable-handle").find(".fa-arrows-alt-h").length<1&&e.find(".ui-resizable-handle").append('<i class="fas fa-arrows-alt-h"></i>')},500)})}}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(c,p,h){p.extend(SekPreviewPrototype,{printLevelUI:function(e){var t,a,i,s;if((h.isUndefined(e)||e.length<1)&&this.errare("sekPreview::printeLevelUI => invalid level element => ",e),"location"!=(a=e.data("sek-level"))&&!(0<(s=e).children(".sek-dyn-ui-wrapper").length)){var n=s[0].getBoundingClientRect(),o=s.data("sek-level");switch(s.toggleClass("sek-shrink-my-ui",n.width&&n.width<("section"===o?350:"column"===o?300:200)),i={id:s.data("sek-id"),level:o},a){case"section":var r,d,l=s.closest('div[data-sek-level="location"]'),c=s.closest('div[data-sek-level="column"]'),k=!0===s.data("sek-is-nested");k?0<c.length&&(r=c.find(".sek-column-inner").first().children("div[data-sek-level]").length==s.index()+1,d=0===s.index()):0<l.length&&(r=l.children('div[data-sek-level="section"]').length==s.index()+1,d=0===s.index()),i=h.extend(i,{is_nested:k,can_have_more_columns:s.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,is_global_location:!0===l.data("sek-is-global-location"),is_last_section_in_parent:r,is_first_section_in_parent:d,is_header_location:!0===l.data("sek-is-header-location"),is_footer_location:!0===l.data("sek-is-footer-location")});break;case"column":var u=s.closest('div[data-sek-level="section"]');i=h.extend(i,{parent_can_have_more_columns:u.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<12,parent_is_single_column:u.find(".sek-sektion-inner").first().children('div[data-sek-level="column"]').length<2,parent_is_last_allowed_nested:!0===u.data("sek-is-nested"),has_nested_section:0<s.find('[data-sek-is-nested="true"]').length});break;case"module":var m=this.getRegisteredModuleProperty(s.data("sek-module-type"),"name");i=h.extend(i,{module_name:"not_set"!=m?m:""})}!0===p(".sektion-wrapper").data("sek-resizing-columns")&&h.contains(["column","module"],a)||(t=this.parseTemplate("#sek-dyn-ui-tmpl-"+a),p.when(s.prepend(t(i))).done(function(){s.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}},setupUiHoverVisibility:function(){var i,e,r=this,d=function(){(e=p(this)).children(".sek-dyn-ui-wrapper").length<1||sekPreviewLocalized.isPreviewUIDebugMode||r.isDraggingElement||(e.data("UIisFadingOut",!0),e.children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){p(this).remove(),e.data("UIisFadingOut",!1)}}))},s=function(){r.cachedElements.$body.stop(!0,!0).find(".sek-add-content-button").each(function(){p(this).fadeOut({duration:200,complete:function(){p(this).remove()}})})};r.cachedElements.$body.on("sek-location-refreshed sek-section-added sek-level-refreshed",'[data-sek-level="location"]',function(e,t){s()});var t,a=function(){var e=p(this);clearTimeout(e.data("_toggle_ui_menu_")),e.data("_toggle_ui_menu_",setTimeout(function(){n.call(e)},1e4))},n=function(e){var t=p(this),a=p(this).closest(".sek-dyn-ui-location-type"),i=t.closest(".sek-dyn-ui-wrapper").find(".sek-dyn-ui-inner");!0===e?(t.removeClass("sek-collapsed"),i.addClass("sek-is-expanded"),a.hide()):(t.addClass("sek-collapsed"),i.removeClass("sek-is-expanded"),a.show())};r.cachedElements.$body.on("click",".sek-dyn-ui-location-inner",function(e){var t=p(this).find(".sek-dyn-ui-hamb-menu-wrapper");p(this).closest('[data-sek-level="section"]').find(".sek-dyn-ui-hamb-menu-wrapper").each(function(){n.call(p(this))}),n.call(t,!0),a.call(t)}),r.cachedElements.$body.on("mouseenter mouseover mouseleave",".sek-dyn-ui-wrapper",h.throttle(function(e){var t=p(this).find(".sek-dyn-ui-hamb-menu-wrapper");h.isUndefined(t.data("_toggle_ui_menu_"))||t.hasClass("sek-collapsed")||0<t.length&&a.call(t)},50)),r.cachedElements.$body.on("click",".sek-minimize-ui",function(e){p(this).closest(".sek-dyn-ui-location-type").slideToggle("fast")}),r.cachedElements.$body.on("mouseenter",".sek-wp-content-wrapper",function(e){0<(t=p(this)).children(".sek-dyn-ui-wrapper").length&&!0!==t.data("UIisFadingOut")||(i=r.parseTemplate("#sek-dyn-ui-tmpl-wp-content"),p.when(t.prepend(i({}))).done(function(){t.find(".sek-dyn-ui-wrapper").stop(!0,!0).fadeIn({duration:150,complete:function(){}})}))}).on("mouseleave",".sek-wp-content-wrapper",function(e){p(this).data("UIisFadingOut",!0),t=p(this),p(this).children(".sek-dyn-ui-wrapper").stop(!0,!0).fadeOut({duration:150,complete:function(){p(this).remove(),t.data("UIisFadingOut",!1)}})});var l=function(n,e){var o,t=[];o=h.isUndefined(e)||e.length<1?(r.cachedElements.$body.find('[data-sek-level][data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]').each(function(){t.push(p(this))}),"printOrScheduleRemoval"):(t.push(e),"mayBeRemove"),h.each(t,function(e){var t=e[0].getBoundingClientRect(),a=n.x<=t.right&&t.left<=n.x,i=n.y>=t.top&&t.bottom>=n.y,s=e;switch(o){case"mayBeRemove":s.data("sek-ui-removal-scheduled",!1),a&&i||d.call(s);break;case"printOrScheduleRemoval":a&&i?(s.data("sek-ui-removal-scheduled",!1),r.printLevelUI(s)):!0!==s.data("sek-ui-removal-scheduled")&&(s.data("sek-ui-removal-scheduled",!0),s.children(".sek-dyn-ui-wrapper").find(".sek-is-expanded").length<1?l(n,s):h.delay(function(){!0===s.data("sek-ui-removal-scheduled")&&l(r.mouseMovedRecently(),s)},3500))}})};r.mouseMovedRecently=new c.Value({}),r.mouseMovedRecently.bind(function(e){var k,t,a;h.isEmpty(e)?sekPreviewLocalized.isPreviewUIDebugMode||(s(),r.cachedElements.$body.stop(!0,!0).find("[data-sek-level]").each(function(){p(this).children(".sek-dyn-ui-wrapper").find(".sek-is-expanded").length<1&&d.call(p(this))})):(r.cachedElements.$body.find('div[data-sek-level="location"]').each(function(){var e;$sectionCollection=p(this).children('div[data-sek-level="section"]'),i=r.parseTemplate("#sek-tmpl-add-content-button"),t=p(this).data("sek-id"),a=!0===p(this).data("sek-is-global-location"),$sectionCollection.each(function(){0<p(this).find(".sek-add-content-button").length||(p.when(p(this).prepend(i({location:t,is_global_location:a}))).done(function(){e=p(this).find(".sek-add-content-button"),p(this).data("sek-id")&&e.attr("data-sek-before-section",p(this).data("sek-id")),e.fadeIn(300)}),$sectionCollection.length==p(this).index()+1&&p.when(p(this).append(i({is_last:!0,location:t,is_global_location:a}))).done(function(){e=p(this).find(".sek-add-content-button").last(),p(this).data("sek-id")&&e.attr("data-sek-after-section",p(this).data("sek-id")),e.fadeIn(300)}))})}),p(".sek-empty-location-placeholder").each(function(){0<p(this).find(".sek-add-content-button").length||(t=p(this).closest('div[data-sek-level="location"]').data("sek-id"),a=!0===p(this).closest('div[data-sek-level="location"]').data("sek-is-global-location"),p.when(p(this).append(i({location:t,is_global_location:a}))).done(function(){$btn_el=p(this).find(".sek-add-content-button"),$btn_el.attr("data-sek-is-first-section",!0),$btn_el.fadeIn(300)}))}),k=e,r.cachedElements.$body.find(".sek-add-content-button").each(function(){var e=p(this)[0].getBoundingClientRect(),t=k.y,a=k.x,i=Math.abs(t-e.bottom),s=Math.abs(e.top-t),n=a-e.right,o=e.left-a,r=i<40||s<40,d=0<n&&n<40||0<o&&o<40,l=a<=e.right&&e.left<=a,c=t>=e.top&&e.bottom>=t;p(this).toggleClass("sek-mouse-is-close",(r||c)&&(d||l))}),l(e))});var o=function(){clearTimeout(r.cachedElements.$window.data("_scroll_move_timer_")),r.mouseMovedRecently.set({})};return r.cachedElements.$window.on("mousemove scroll",h.throttle(function(e){r.mouseMovedRecently({x:e.clientX,y:e.clientY}),clearTimeout(r.cachedElements.$window.data("_scroll_move_timer_")),r.cachedElements.$window.data("_scroll_move_timer_",setTimeout(function(){r.mouseMovedRecently.set({})},4e3))},50)),c.preview.bind("sek-drag-start",function(){o()}),r.cachedElements.$body.on("sek-section-added",'[data-sek-level="location"]',function(e,t){o()}),this}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(m,p,h){p.extend(SekPreviewPrototype,{scheduleUiClickReactions:function(){var u=this;u.cachedElements.$body.on("click",function(e){m.preview.send("sek-clean-target-drop-zone");var t,a="inactiveZone",i=p(e.target),s=i.closest('[data-sek-level="location"][data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]'),n=i.closest('[data-sek-preview-level-guid="'+sekPreviewLocalized.previewLevelGuid+'"]'),o=i.closest("[data-sek-click-on]"),r=s.data("sek-id"),d=n.data("sek-level"),l=n.data("sek-id");switch(a="add-content"==i.data("sek-click-on")||0<i.closest("[data-sek-click-on]").length&&"add-content"==i.closest("[data-sek-click-on]").data("sek-click-on")?"addContentButton":!h.isEmpty(i.data("sek-click-on"))||0<o.length?"UIIcon":"module"==n.data("sek-level")?"moduleWrapper":"column"==n.data("sek-level")&&!0===n.data("sek-no-modules")?"noModulesColumn":i.hasClass("sek-to-json")?"sekToJson":"column"==n.data("sek-level")?"columnOutsideModules":"section"==n.data("sek-level")?"sectionOutsideColumns":h.isEmpty(i.data("sek-add"))?i.hasClass("sek-wp-content-wrapper")||i.hasClass("sek-wp-content-dyn-ui")?"wpContent":i.hasClass("sek-edit-wp-content")?"editWpContent":"inactiveZone":"addSektion",0<s.length&&h.isEmpty(r)&&u.errare("::scheduleUiClickReactions => error location id can not be empty"),a){case"addContentButton":var c=!0===i.closest("[data-sek-is-first-section]").data("sek-is-first-section");m.preview.send("sek-add-section",{location:r,level:"section",before_section:i.closest("[data-sek-before-section]").data("sek-before-section"),after_section:i.closest("[data-sek-after-section]").data("sek-after-section"),is_first_section:c,send_to_preview:!c});break;case"UIIcon":if(n.length<1)throw new Error("ERROR => sek-front-preview => No valid level dom element found");if(t=i.closest("[data-sek-click-on]").data("sek-click-on"),h.isEmpty(t))throw new Error("Invalid action");if(h.isEmpty(d)||h.isEmpty(l))throw new Error("ERROR => sek-front-preview => No valid level id found");u._send_(i,{action:t,location:r,level:d,id:l,was_triggered:!1});break;case"moduleWrapper":if(0<i.parent(".sek-dyn-ui-icons").length)return;u._send_(i,{action:"edit-module",level:d,id:l});break;case"noModulesColumn":if(0<i.parent(".sek-dyn-ui-icons").length)return;u._send_(i,{action:"edit-options",location:r,level:d,id:l});break;case"columnOutsideModules":case"sectionOutsideColumns":u._send_(i,{action:"edit-options",location:r,level:d,id:l});break;case"addSektion":m.preview.send("sek-add-section",{location:r,level:i.data("sek-add")});break;case"sekToJson":m.preview.send("sek-to-json",{id:l});break;case"wpContent":m.preview.send("sek-notify",{type:"info",duration:8e3,message:sekPreviewLocalized.i18n["This content has been created with the WordPress editor."]});break;case"editWpContent":var k=i.closest("[data-sek-wp-edit-link]").data("sek-wp-edit-link");h.isEmpty(k)||window.open(k,"_blank");break;case"inactiveZone":m.preview.send("sek-click-on-inactive-zone")}})},_send_:function(e,t){var a=p.extend(!0,{},t),i="",s=e.closest('div[data-sek-level="module"]'),n="module"===t.level?s.data("sek-module-type"):"";"module"===t.level&&"czr_tiny_mce_editor_module"===n&&(i=0<s.find("div[data-sek-input-id]").length?s.find("div[data-sek-input-id]").data("sek-input-id"):""),m.preview.send("sek-"+t.action,h.extend({location:t.location,level:t.level,id:t.id,content_type:e.data("sek-content-type"),module_type:n,in_column:0<e.closest('div[data-sek-level="column"]').length?e.closest('div[data-sek-level="column"]').data("sek-id"):"",in_sektion:0<e.closest('div[data-sek-level="section"]').length?e.closest('div[data-sek-level="section"]').data("sek-id"):"",clicked_input_type:0<e.closest("div[data-sek-input-type]").length?e.closest("div[data-sek-input-type]").data("sek-input-type"):"",clicked_input_id:0<e.closest("div[data-sek-input-id]").length?e.closest("div[data-sek-input-id]").data("sek-input-id"):"",was_triggered:t.was_triggered,syncedTinyMceInputId:i},a))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,n,o){n.extend(SekPreviewPrototype,{setupLoader:function(){var t=this;this._css_loader_html='<div class="sek-css-loader sek-mr-loader" style="display:none"><div></div><div></div><div></div></div>',t.cachedElements.$body.on(["sek-modules-refreshed","sek-columns-refreshed","sek-section-added","sek-level-refreshed","sek-stylesheet-refreshed","sek-ajax-error"].join(" "),function(e){t.cleanLoader()})},mayBePrintLoader:function(e){e=o.isObject(e)?e:{};var t=this,a=e.loader_located_in_level_id;if(!o.isEmpty(a)){var i=n('[data-sek-id="'+a+'"]');0<i.length&&n(".sek-level-clone ").length<1&&($levelClone=n("<div>",{class:"sek-level-clone"}),i.find("[data-sek-level]").each(function(){n(this).addClass("sek-refreshing")}),i.prepend($levelClone),$levelClone.css({width:i.outerWidth()+"px",height:i.outerHeight()+"px"}).append(t._css_loader_html).find(".sek-css-loader").fadeIn("fast"),clearTimeout(n.data(this,"_nimble_loader_active_timer_")),n.data(this,"_nimble_loader_active_timer_",setTimeout(function(){t.cleanLoader()},e.duration||4e3)))}if(!0===e.fullPageLoader){var s=n("<div>",{id:"nimble-full-page-loader-wrapper",class:"white-loader"});t.cachedElements.$body.append(s),s.fadeIn("fast").append(t._css_loader_html).find(".sek-css-loader").fadeIn("fast"),n('[data-sek-level="location"]').each(function(){n(this).addClass("sek-blur")}),clearTimeout(n.data(this,"_nimble_full_page_loader_active_timer_")),n.data(this,"_nimble_full_page_loader_active_timer_",setTimeout(function(){t.cleanLoader({cleanFullPageLoader:!0})},e.duration||6e3))}},cleanLoader:function(e){n(".sek-level-clone").remove(),n("[data-sek-level]").each(function(){n(this).removeClass("sek-refreshing")}),!0===(e=e||{}).cleanFullPageLoader&&(n('[data-sek-level="location"]').each(function(){n(this).removeClass("sek-blur")}),n("#nimble-full-page-loader-wrapper").remove())}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(k,u,m){u.extend(SekPreviewPrototype,{schedulePanelMsgReactions:function(){var t,c=this,e={"sek-add-section":"ajaxAddSektion","sek-add-content-in-new-sektion":"ajaxAddSektion","sek-add-content-in-new-nested-sektion":"ajaxAddSektion","sek-add-column":"ajaxRefreshColumns","sek-add-module":"ajaxRefreshModulesAndNestedSections","sek-refresh-stylesheet-in-the-background-for-custom-css":"ajaxRefreshStylesheet","sek-refresh-stylesheet":"ajaxRefreshStylesheet","sek-resize-columns":"ajaxResizeColumns","sek-maybe-print-loader":function(e){try{c.mayBePrintLoader(e)}catch(e){k.errare("sek-print-loader => error",e)}},"sek-clean-loader":function(e){try{c.cleanLoader(e)}catch(e){k.errare("sek-clean-loader => error",e)}},"sek-remove":function(e){var t,a=e.apiParams.id,i=u('div[data-sek-id="'+a+'"]');switch(e.apiParams.action){case"sek-remove-section":c.mayBePrintLoader({loader_located_in_level_id:e.apiParams.location}),!0===e.apiParams.is_nested?t=c.ajaxRefreshModulesAndNestedSections(e):((m.isEmpty(a)||i.length<1)&&c.errare("reactToPanelMsg => sek-remove => invalid candidate id => ",a),c.cachedElements.$body.find(i).remove(),u('[data-sek-id="'+e.apiParams.location+'"]').trigger("sek-level-refreshed"));break;case"sek-remove-column":t=c.ajaxRefreshColumns(e);break;case"sek-remove-module":t=c.ajaxRefreshModulesAndNestedSections(e)}return m.isEmpty(t)?u.Deferred(function(){this.resolve()}):t},"sek-duplicate":function(e){var t;switch(e.apiParams.action){case"sek-duplicate-section":e.apiParams.id=e.cloneId,t=c.ajaxAddSektion(e);break;case"sek-duplicate-column":e.apiParams.id=e.cloneId,t=c.ajaxRefreshColumns(e);break;case"sek-duplicate-module":e.apiParams.id=e.cloneId,t=c.ajaxRefreshModulesAndNestedSections(e)}return t},"sek-refresh-level":function(n){return c.mayBePrintLoader({loader_located_in_level_id:n.apiParams.id}),c.doAjax({location_skope_id:n.location_skope_id,local_skope_id:n.local_skope_id,action:"sek_get_content",id:n.apiParams.id,level:n.apiParams.level,sek_action:n.apiParams.action}).fail(function(e){c.errare("ERROR reactToPanelMsg => sek-refresh-level => ",e),u('[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-ajax-error")}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(c.errare("SekPreviewPrototype::sek-refresh-level => ajax_response.data.contents is undefined ",e),c.errare("params ?",n));var a='<span class="sek-placeholder" data-sek-placeholder-for="'+n.apiParams.id+'"></span>',i=u('div[data-sek-id="'+n.apiParams.id+'"]');if(i.length<1)c.errare("reactToPanelMsg => sek-refresh-level ajax done => the level to refresh is not rendered in the page",e);else{i.before(a);var s=u('[data-sek-placeholder-for="'+n.apiParams.id+'"]');i.remove(),m.isUndefined(t)?c.errare("reactToPanelMsg => sek-refresh-level ajax done => missing html_content",e):s.after(t),0<s.length&&s.remove(),u('[data-sek-id="'+n.apiParams.id+'"]').trigger("sek-level-refreshed",{level:n.apiParams.level,id:n.apiParams.id}),n.apiParams.moved_level_id&&k.preview.trigger("sek-animate-to-level",{id:n.apiParams.moved_level_id})}})},"sek-move":function(e){switch(e.apiParams.action){case"sek-move-column":if(e.apiParams.from_sektion!=e.apiParams.to_sektion){var t=u.extend(!0,{},e),a=u.extend(!0,{},e);u('[data-sek-id="'+e.apiParams.from_sektion+'"]',".sektion-wrapper").find('div[data-sek-level="column"]').length<1?k.preview.send("sek-add-column",{in_sektion:e.apiParams.from_sektion,autofocus:!1}):(t.apiParams=m.extend(t.apiParams,{in_sektion:e.apiParams.from_sektion,action:"sek-refresh-columns-in-sektion"}),c.ajaxRefreshColumns(t)),a.apiParams=m.extend(a.apiParams,{in_sektion:e.apiParams.to_sektion,action:"sek-refresh-columns-in-sektion"}),c.ajaxRefreshColumns(a)}break;case"sek-move-module":var i=u.extend(!0,{},e),s=u.extend(!0,{},e);i.apiParams.from_column!=i.apiParams.to_column&&(i.apiParams=m.extend(i.apiParams,{in_column:i.apiParams.from_column,in_sektion:i.apiParams.from_sektion,action:"sek-refresh-modules-in-column"}),c.ajaxRefreshModulesAndNestedSections(i)),e.apiParams=m.extend(s.apiParams,{in_column:s.apiParams.to_column,in_sektion:s.apiParams.to_sektion,action:"sek-refresh-modules-in-column"}),c.ajaxRefreshModulesAndNestedSections(s),u('[data-sek-id="'+e.apiParams.to_column+'"]',".sektion-wrapper").find(".sek-column-inner").sortable("refresh")}},"sek-edit-options":function(e){c.activeLevelUI(e.uiParams.id)},"sek-edit-module":function(e){c.activeLevelUI(e.uiParams.id)},"sek-drag-start":function(s){var n=1,o=!1;u('[data-sek-level="location"]').children('[data-sek-level="section"]').each(function(){var e=u(this).data("sek-id"),t=u(this).find('[data-sek-level="column"]').length,a=u(this).find('[data-sek-level="module"]').length,i=t<2&&a<1;!o&&!i&&u('[data-drop-zone-before-section="'+e+'"]').length<1&&u(this).before('<div class="sek-content-'+s.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-before-section="'+e+'"></div>'),i||n!=u(".sektion-wrapper").children('[data-sek-level="section"]').length||u(this).after('<div class="sek-content-'+s.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-sections" data-drop-zone-after-section="'+e+'"></div>'),n++,o=i}),u(".sek-empty-location-placeholder").each(function(){u.when(u(this).append('<div class="sek-content-'+s.content_type+'-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="in-empty-location"></div>'))}),("module"==s.content_type||"preset_section"==s.content_type&&!0===s.eligible_for_module_dropzones)&&u('[data-sek-level="column"]').each(function(){var e=u(this).children(".sek-column-inner").children('[data-sek-level="module"]'),t=u(this).children(".sek-column-inner").children('[data-sek-is-nested="true"]');e=e.add(t);var a=1;e.each(function(){u('[data-drop-zone-before-module-or-nested-section="'+u(this).data("sek-id")+'"]').length<1&&u(this).before('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-before-module-or-nested-section="'+u(this).data("sek-id")+'"></div>'),a==e.length&&u('[data-drop-zone-after-module-or-nested-section="'+u(this).data("sek-id")+'"]').length<1&&u(this).after('<div class="sek-content-module-drop-zone sek-dynamic-drop-zone sek-drop-zone" data-sek-location="between-modules-and-nested-sections" data-drop-zone-after-module-or-nested-section="'+u(this).data("sek-id")+'"></div>'),a++})}),c.cachedElements.$body.addClass("sek-dragging"),m.delay(function(){u(".sek-dynamic-drop-zone").css({opacity:1})},100)},"sek-drag-stop":function(e){c.cachedElements.$body.removeClass("sek-dragging"),u(".sortable-placeholder").remove(),u(".sek-dynamic-drop-zone").remove()},"sek-animate-to-level":function(e){var t=u('[data-sek-id="'+e.id+'"]');0<t.length&&!nb_.isInScreen(t[0])&&t[0].scrollIntoView({behavior:"auto",block:"center",inline:"center"})},"sek-clean-level-uis":function(e){u(".sek-dyn-ui-wrapper").each(function(){u(this).remove()})},"sek-display-level-ui":function(e){var t=u('[data-sek-id="'+e.id+'"]');0<t.length&&c.printLevelUI(t)},"sek-set-double-click-target":function(e){if(u(".sek-target-for-double-click-insertion").removeClass("sek-target-for-double-click-insertion"),m.isObject(e)&&e.id){var t=u('[data-sek-id="'+e.id+'"]');1===t.length&&t.addClass("sek-target-for-double-click-insertion")}},"sek-reset-double-click-target":function(e){u(".sek-target-for-double-click-insertion").removeClass("sek-target-for-double-click-insertion")},"sek-update-html-in-selector":function(e){var t,a=u('[data-sek-id="'+e.id+'"]');t=m.isEmpty(e.changed_item_id)?u(e.selector,a):e.selector?u('[data-sek-item-id="'+e.changed_item_id+'"] '+e.selector,a):u('[data-sek-item-id="'+e.changed_item_id+'"]',a),0<a.length&&0<t.length?t.html(e.html):c.errare("reactToPanelMsg => sek-update-html-in-selector => missing level or target dom element",e)},"sek-update-css-with-postmessage":function(e){if(!m.isUndefined(e.css_content)&&m.isString(e.css_content)){var t,a,i;e.css_content=e.css_content.replace(/\/\*.+?\*\/|\/\/.*(?=[\n\r])/g,""),i=e.is_current_page_custom_css?(t="nb-custom-css-for-local-page",""):(t="nb-custom-css-for-level"+e.id,'body .sektion-wrapper [data-sek-id="'+e.id+'"]'),(a=u("#"+t)).length<1&&(u("head").append(u("<style/>",{id:t})),a=u("#"+t));var s,n,o,r,d=[],l="";s=e.css_content.split("}"),m.each(s,function(t){t=t.replace(/\n|\r/g,""),m.isEmpty(t)||-1===t.indexOf("{")||(t=t.replace(/.nimble-level/g,""),n=t.substr(0,t.indexOf("{")),o=n.replace(/ /g,""),t=t.replace(n,""),m.isEmpty(o)?d.push(i+t+"}css_delimiter"):(r=n.split(","),m.each(r,function(e){m.isEmpty(e)||d.push(i+" "+e+t+"}css_delimiter")})))}),m.isEmpty(d)||(l=(l=d.join("css_delimiter")).replace(/css_delimiter/g,"")),m.isEmpty(l.replace(/ /g,""))?a.remove():a.html(l),(e=u.extend({},!0,e)).dont_print_loader=!0,k.preview.trigger("sek-refresh-stylesheet-in-the-background-for-custom-css",e)}else c.errare("error => sek-update-css-with-postmessage => css content is not a string")},"sek-print-confettis":function(e){if(window.confetti&&window.requestAnimationFrame){var t=(e=e||{}).duration||Date.now()+1e3,a=["#f18700","#684F2F","#eea236"];!function e(){confetti({particleCount:2,angle:60,spread:55,origin:{x:0,y:.8},colors:a}),confetti({particleCount:4,angle:120,spread:55,origin:{x:1,y:.8},colors:a}),Date.now()<t&&window.requestAnimationFrame(e)}()}}},i=function(a,e,i){a=m.extend({location_skope_id:"",apiParams:{},uiParams:{}},a||{});c.cachedElements.$body.addClass(i);try{u.when(m.isFunction(e)?e(a):c[e].call(c,a)).done(function(e){var t;t=e,k.preview.send([i,"done"].join("_"),a),a.apiParams.is_multi_items&&"sek-refresh-level"===a.apiParams.action&&k.preview.send("multi-items-module-refreshed",a),m.isUndefined(t)||t.data&&t.data.setting_validities&&k.preview.send("selective-refresh-setting-validities",t.data.setting_validities)}).fail(function(){k.preview.send("sek-notify",{type:"error",duration:1e4,message:sekPreviewLocalized.i18n["Something went wrong, please refresh this page."]})}).always(function(e){c.cachedElements.$body.removeClass(i)}).then(function(){k.preview.trigger("control-panel-requested-action-done",{action:i,args:a}),c.mayBeAnimateToEditedLevel(a)})}catch(e){c.errare("reactToPanelMsg => Error when firing the callback of "+i,e),c.cachedElements.$body.removeClass(i)}m.isObject(a)&&a.apiParams&&a.apiParams.id&&(!(t=c.activeLevelEl())||!m.isObject(t)||t.length<1||c.activeLevelUI()!==a.apiParams.id)&&(c.activeLevelEl(u('[data-sek-id="'+a.apiParams.id+'"]')),t=c.activeLevelEl()),c.mayBeAnimateToEditedLevel(a)};m.each(e,function(t,a){"sek-refresh-stylesheet"===a?(k.preview.bind(a,function(e){i(e,t,a)}),k.preview.bind(a,m.debounce(function(e){i(e,t,a),e&&e.apiParams&&e.apiParams.id&&k.preview.trigger("sek-animate-to-level",{id:e.apiParams.id})},1e3))):"sek-refresh-stylesheet-in-the-background-for-custom-css"===a?k.preview.bind(a,m.debounce(function(e){i(e,t,a),e&&e.apiParams&&e.apiParams.id&&k.preview.trigger("sek-animate-to-level",{id:e.apiParams.id})},500)):k.preview.bind(a,function(e){i(e,t,a)})})},mayBeAnimateToEditedLevel:function(e){m.isObject(e)&&e.apiParams&&e.apiParams.id&&($elToFocusOn=u('[data-sek-id="'+e.apiParams.id+'"]'),0<$elToFocusOn.length&&!nb_.isInScreen($elToFocusOn[0])&&$elToFocusOn[0].scrollIntoView({behavior:"auto",block:"center",inline:"center"}))}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,r){o.extend(SekPreviewPrototype,{ajaxAddSektion:function(s){var n=this;return n.mayBePrintLoader({loader_located_in_level_id:s.apiParams.location}),n.doAjax({action:"sek_get_content",id:s.apiParams.id,in_sektion:s.apiParams.in_sektion,in_column:s.apiParams.in_column,location_skope_id:s.location_skope_id,local_skope_id:s.local_skope_id,sek_action:s.apiParams.action,is_nested:s.apiParams.is_nested,content_type:s.apiParams&&s.apiParams.content_type?s.apiParams.content_type:null,collection_of_preset_section_id:s.apiParams&&s.apiParams.collection_of_preset_section_id?s.apiParams.collection_of_preset_section_id:[]}).done(function(e){var t,a="";if(e.data&&e.data.contents?a=e.data.contents:(n.errare("SekPreviewPrototype::ajaxAddSektion => ajax_response.data.contents is undefined ",e),n.errare("params ?",s)),s.apiParams.is_nested){(t=o(".sektion-wrapper").find('div[data-sek-id="'+s.apiParams.in_column+'"]')).length<1&&n.errare("preview => reactToPanelMsg => sek-add-column => no DOM node for parent column => ",s.apiParams.in_column);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+s.apiParams.in_column+'"></span>';t.before(i),t.remove(),o(".sektion-wrapper").find(".sek-placeholder").after(a),o(".sektion-wrapper").find(".sek-placeholder").remove()}else"sek-duplicate-section"!=s.apiParams.action||r.isEmpty(s.cloneId)?($beforeCandidate=o('.sektion-wrapper[data-sek-id="'+s.apiParams.location+'"]').find('div[data-sek-id="'+s.apiParams.before_section+'"]'),$afterCandidate=o('.sektion-wrapper[data-sek-id="'+s.apiParams.location+'"]').find('div[data-sek-id="'+s.apiParams.after_section+'"]'),!r.isEmpty(s.apiParams.before_section)&&0<$beforeCandidate.length?$beforeCandidate.before(a):!r.isEmpty(s.apiParams.after_section)&&0<$afterCandidate.length?$afterCandidate.after(a):o('[data-sek-id="'+s.apiParams.location+'"]').append(a)):o(".sektion-wrapper").find('div[data-sek-id="'+s.apiParams.in_sektion+'"]').after(a);"sek-duplicate-section"==s.apiParams.action&&o('div[data-sek-id="'+s.cloneId+'"]',".sektion-wrapper").each(function(){o(this).trigger("sek-columns-refreshed")}),s.apiParams.is_nested&&(n.makeModulesSortableInColumn(s.apiParams.in_column),o(".sektion-wrapper").find('div[data-sek-id="'+s.apiParams.in_sektion+'"]').each(function(){n.maybeMakeColumnResizableInSektion.call(this)})),s.cloneId&&o('div[data-sek-id="'+s.cloneId+'"]').trigger("sek-section-added",s),o('div[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-section-added",s),o('div[data-sek-id="'+s.apiParams.location+'"]').trigger("sek-location-refreshed",s)}).fail(function(e){n.errare("ERROR in sek_get_html_for_injection ? ",e),o('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(o,r,e){r.extend(SekPreviewPrototype,{ajaxRefreshColumns:function(s){var n=this;return n.mayBePrintLoader({loader_located_in_level_id:s.apiParams.in_sektion}),n.doAjax({action:"sek_get_content",id:s.apiParams.id,in_sektion:s.apiParams.in_sektion,location_skope_id:s.location_skope_id,local_skope_id:s.local_skope_id,sek_action:s.apiParams.action}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(n.errare("SekPreviewPrototype::ajaxRefreshColumns => ajax_response.data.contents is undefined ",e),n.errare("params ?",s));var a=r('div[data-sek-id="'+s.apiParams.in_sektion+'"]');a.length<1&&n.errare("reactToPanelMsg => "+s.apiParams.action+" => no DOM node for parent sektion => ",s.apiParams.in_sektion);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+s.apiParams.in_sektion+'"></span>';a.before(i),a.remove(),r(".sektion-wrapper").find(".sek-placeholder").after(t),r(".sektion-wrapper").find(".sek-placeholder").remove(),o.preview.trigger("sek-refresh-stylesheet",s),r('div[data-sek-id="'+s.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed",{in_sektion:s.apiParams.in_sektion})}).fail(function(e){n.errare("ERROR reactToPanelMsg => sek-add-column => ",e),r('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-ajax-error")})},ajaxResizeColumns:function(a){var i=this;return i.mayBePrintLoader({loader_located_in_level_id:a.apiParams.in_sektion}),i.doAjax({action:"sek_get_content",resized_column:a.apiParams.resized_column,sister_column:a.apiParams.sister_column,location_skope_id:a.location_skope_id,local_skope_id:a.local_skope_id,sek_action:"sek-resize-columns"}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(i.errare("SekPreviewPrototype::ajaxResizeColumns => ajax_response.data.contents is undefined ",e),i.errare("params ?",a)),r('[data-sek-id="'+a.apiParams.resized_column+'"]').css({width:"",height:""}),i.appendDynStyleSheet(a.location_skope_id,t),r('div[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-columns-refreshed")}).fail(function(e){i.errare("ERROR reactToPanelMsg => sek-resize-columns => ",e),r('[data-sek-id="'+a.apiParams.in_sektion+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,o,t){o.extend(SekPreviewPrototype,{ajaxRefreshModulesAndNestedSections:function(s){var n=this;return n.mayBePrintLoader({loader_located_in_level_id:s.apiParams.in_column}),n.doAjax({action:"sek_get_content",id:s.apiParams.id,in_sektion:s.apiParams.in_sektion,in_column:s.apiParams.in_column,location_skope_id:s.location_skope_id,local_skope_id:s.local_skope_id,sek_action:s.apiParams.action,is_nested:s.apiParams.is_nested}).done(function(e){var t="";e.data&&e.data.contents?t=e.data.contents:(n.errare("SekPreviewPrototype::ajaxRefreshModulesAndNestedSections => ajax_response.data.contents is undefined ",e),n.errare("params ?",s));var a=o('[data-sek-id="'+s.apiParams.in_column+'"]');a.length<1&&n.errare("reactToPanelMsg => ajaxRefreshModulesAndNestedSections => no DOM node for parent column => ",s.apiParams.in_column);var i='<span class="sek-placeholder" data-sek-placeholder-for="'+s.apiParams.in_column+'"></span>';a.before(i),a.remove(),o('[data-sek-placeholder-for="'+s.apiParams.in_column+'"]').after(t),o('[data-sek-placeholder-for="'+s.apiParams.in_column+'"]').remove(),o('[data-sek-id="'+s.apiParams.in_column+'"]').trigger("sek-modules-refreshed",{in_column:s.apiParams.in_column,in_sektion:s.apiParams.in_sektion})}).fail(function(e){n.errare("ERROR reactToPanelMsg => sek-add-module => ",e),o('[data-sek-id="'+s.apiParams.id+'"]').trigger("sek-ajax-error")})}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,n,o){n.extend(SekPreviewPrototype,{ajaxRefreshStylesheet:function(a){var i=this;return!0!==a.dont_print_loader&&i.mayBePrintLoader({loader_located_in_level_id:a.apiParams.id}),i.doAjax({action:"sek_get_content",location_skope_id:a.location_skope_id,local_skope_id:a.local_skope_id,sek_action:"sek-refresh-stylesheet"}).done(function(e){var t="";e.data&&e.data.contents&&(t=e.data.contents),i.appendDynStyleSheet(a.location_skope_id,t),n('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-stylesheet-refreshed",{level:a.apiParams.level,id:a.apiParams.id})}).fail(function(e){i.errare("sek-refresh-stylesheet fail !"),n('[data-sek-id="'+a.apiParams.id+'"]').trigger("sek-ajax-error")})},appendDynStyleSheet:function(e,t){var a="#sek-"+e,i="#"+sekPreviewLocalized.googleFontsStyleId,s="#"+sekPreviewLocalized.globalOptionsStyleId;0<n("head").find(a).length&&n("head").find(a).remove(),0<n("head").find(i).length&&n("head").find(i).remove(),0<n("head").find(s).length&&n("head").find(s).remove(),o.isEmpty(t)||n("head").append(t),!o.isEmpty(t)&&n("head").find(a).length<1&&n("head").find(i).length<1&&n("head").find(s).length<1?this.errare("sek-preview => problem when printing the dynamic inline style for : "+a,t):n("head").find(a).attr("sek-data-origin","customizer")}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(r,d,l){d.extend(SekPreviewPrototype,{parseTemplate:l.memoize(function(t){var a,i=this,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){if(d(t).length<1)return i.errare("preview => parseTemplate => the requested tmpl does not exist =>"+t),"";try{a=a||l.template(d(t).html(),s)}catch(e){i.errare("preview => parseTemplate => problem when parsing tmpl =>"+t,e)}return a(e)}}),_prettyPrintLog:function(e){e=l.extend({bgCol:"#5ed1f5",textCol:"#000",consoleArguments:[]},e);var t,a=Array.from(e.consoleArguments);return a=l.isEmpty(l.filter(a,function(e){return!l.isString(e)}))?a.join(" "):JSON.stringify(a.join(" ")),["%c "+(t=a,l.isString(t)?300<t.length?t.substr(0,299)+"...":t:""),["background:"+e.bgCol,"color:"+e.textCol,"display: block;"].join(";")]},_wrapLogInsideTags:function(e,t,a){l.isUndefined(console)&&"function"!=typeof window.console.log||(sekPreviewLocalized.isDevMode?l.isUndefined(t)?console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})):(console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["<"+e+">"]})),console.log(t),console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:["</"+e+">"]}))):console.log.apply(console,this._prettyPrintLog({bgCol:a,textCol:"#000",consoleArguments:[e]})))},errare:function(e,t){this._wrapLogInsideTags(e,t,"#ffd5a0")},infoLog:function(e,t){this._wrapLogInsideTags(e,t,"#5ed1f5")},doAjax:function(e){var t=this,a=(e=e||(l.isObject(e)?e:{})).ajaxUrl||sekPreviewLocalized.ajaxUrl,i=sekPreviewLocalized.frontNonce,s=d.Deferred(),n=l.extend({action:"",withNonce:!1},e),o=document.createElement("a");return o.href=a,r.isLinkPreviewable(o,{allowAdminAjax:!0})?("https:"==document.location.protocol&&(a=a.replace("http://","https://")),l.isEmpty(n.action)||!l.isString(n.action)?(t.errare("self.doAjax : unproper action provided"),s.resolve().promise()):(n[i.id]=i.handle,!l.isObject(i)||l.isUndefined(i.id)||l.isUndefined(i.handle)?(t.errare("self.doAjax : unproper nonce"),s.resolve().promise()):(n["preview-level-guid"]=sekPreviewLocalized.previewLevelGuid,n.czr_query_params=JSON.stringify(l.isObject(_wpCustomizeSettings.czr_query_params)?_wpCustomizeSettings.czr_query_params:[]),d.post(a,n).done(function(e){"0"!==e&&"-1"!==e&&!1!==e.success||(t.errare("self.doAjax : done ajax error for action : "+n.action,e),s.reject(e)),s.resolve(e)}).fail(function(e){t.errare("self.doAjax : failed ajax error for : "+n.action,e),s.reject(e)}),s.promise()))):(t.errare("self.doAjax => error => !api.isLinkPreviewable for action "+n.action,o),s.resolve().promise())},isModuleRegistered:function(e){return sekPreviewLocalized.registeredModules&&!l.isUndefined(sekPreviewLocalized.registeredModules[e])},getRegisteredModuleProperty:function(e,t){return this.isModuleRegistered(e)?sekPreviewLocalized.registeredModules[e][t]:"not_set"},getLevelModel:function(t,e){var a=this,i="no_match";return l.isUndefined(e)&&a.errare("getLevelModel => a collection must be provided"),l.each(e,function(e){"no_match"==i&&(t===e.id?i=e:l.isArray(e.collection)&&(i=a.getLevelModel(t,e.collection)))}),i}})}(wp.customize,jQuery,_);SekPreviewPrototype=SekPreviewPrototype||{};!function(e,t,a){t.extend(SekPreviewPrototype,e.Events);var i=e.Class.extend(SekPreviewPrototype);e.bind("preview-ready",function(){e.preview.bind("active",function(){try{e.sekPreview=new i}catch(e){SekPreviewPrototype.errare("SekPreviewConstructor => problem on instantiation",e)}})})}(wp.customize,jQuery,_);